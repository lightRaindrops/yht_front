webpackJsonp([1],{"3c4j":function(t,e){},"5VPi":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"filter-wapper"},[i("section",[i("div",{staticClass:"button-group"},[i("el-button",{attrs:{type:"primary",size:"mini"},nativeOn:{click:function(e){return t.ShowDialog({FilterVisible:!0})}}},[t._v("过滤")]),t._v(" "),i("el-dropdown",[i("el-button",{attrs:{type:"success",size:"mini"}},[t._v("\n\t\t\t\t\t新建"),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{nativeOn:{click:function(e){return t.ShowDialog({CreateCustVisible:!0})}}},[t._v("新建客户")]),t._v(" "),i("el-dropdown-item",{nativeOn:{click:function(e){return t.ShowDialog({CreateProVisible:!0})}}},[t._v("新建项目")]),t._v(" "),i("el-dropdown-item",{nativeOn:{click:function(e){return t.ShowDialog({ImportVisible:!0})}}},[t._v("批量导入客户")]),t._v(" "),i("el-dropdown-item",{nativeOn:{click:function(e){return t.ShowDialog({CreatePotentialProVisible:!0})}}},[t._v("新建潜在项目")])],1)],1)],1),t._v(" "),i("div",{staticClass:"fast-query"},[i("el-input",{staticClass:"input-with-select",attrs:{placeholder:"快速查询你需要的内容"},model:{value:t.form[0].value,callback:function(e){t.$set(t.form[0],"value",e)},expression:"form[0].value"}},[i("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:t.form[0].field,callback:function(e){t.$set(t.form[0],"field",e)},expression:"form[0].field"}},[i("el-option",{attrs:{label:"客户名称",value:"cust_id"}}),t._v(" "),i("el-option",{attrs:{label:"旗下项目",value:"pid"}})],1),t._v(" "),i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},nativeOn:{click:function(e){return t.querySearch(e)}},slot:"append"})],1)],1)]),t._v(" "),i("section",{staticClass:"action-tool"},[i("el-radio-group",{staticStyle:{"margin-left":"-80px"},on:{change:t.tabHandle},model:{value:t.tabPosition,callback:function(e){t.tabPosition=e},expression:"tabPosition"}}),t._v(" "),"cooperate"==this.tabPosition?i("div",{staticClass:"checkbox-group"},[i("el-checkbox",{on:{change:t.checkBoxHandle},model:{value:t.config.sale,callback:function(e){t.$set(t.config,"sale",e)},expression:"config.sale"}},[t._v("销售额")]),t._v(" "),i("el-checkbox",{on:{change:t.checkBoxHandle},model:{value:t.config.receive,callback:function(e){t.$set(t.config,"receive",e)},expression:"config.receive"}},[t._v("回款")]),t._v(" "),i("el-checkbox",{on:{change:t.checkBoxHandle},model:{value:t.config.balance,callback:function(e){t.$set(t.config,"balance",e)},expression:"config.balance"}},[t._v("欠款")]),t._v(" "),i("el-checkbox",{on:{change:t.checkBoxHandle},model:{value:t.config.init,callback:function(e){t.$set(t.config,"init",e)},expression:"config.init"}},[t._v("期初")])],1):t._e()],1)])},staticRenderFns:[]};var n=i("VU/8")({data:function(){return{tabPosition:"cooperate",config:{sale:!0,receive:!1,balance:!1,init:!1},form:[{field:"cust_id",value:"",operator:8,logic:1}]}},methods:{init:function(){this.setTable()},setTable:function(){this.$store.dispatch("SetARTable",this.tabPosition)},tabHandle:function(t){this.setTable()},checkBoxHandle:function(){this.$store.dispatch("AlterTableConfig",this.config)},ShowDialog:function(t){this.$store.dispatch("AlterTableConfig",t)},Initialization:function(){var t=this;this.$confirm("该操作会清空所以数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$store.dispatch("ARSumInitialization").then(function(){"success"==t.$store.state.user.ARSumInitialization.status?t.$notify.success("操作成功"):t.$notify.error("操作失败"),t.$store.dispatch("ARSum",t.$store.state.user.filterQuery)})}).catch(function(){})},querySearch:function(){var t=this;this.$store.dispatch("updateFilterQueryParam",{conf:this.form,initialization:!1}).then(function(){t.$store.dispatch("ARSum",t.$store.state.user.filterQuery)})}},created:function(){this.init()}},o,!1,function(t){i("hBtT")},"data-v-97fc1198",null).exports,r=i("hvtN"),a={props:{moduleName:{type:String},actionName:{type:String}},data:function(){return{limit:5,offset:0}},methods:{LoadTableData:function(){this.$store.dispatch(this.actionName,{pid:this.pid,limit:this.limit,offset:this.offset})},handleCurrentChange:function(t){this.offset=(t-1)*this.limit,this.LoadTableData()}},created:function(){this.LoadTableData()},computed:{pagination:function(){return this.$store.state.user.BasePagination},pid:function(){return this.$store.state.user.ARSumCurrentRow.pid},total:function(){return this.$store.state.user[this.moduleName].pagination.total}}},s={render:function(){var t=this.$createElement,e=this._self._c||t;return this.total>0?e("el-pagination",{attrs:{small:"",background:"",layout:this.pagination.layout,"page-sizes":[5],total:this.total},on:{"current-change":this.handleCurrentChange}}):this._e()},staticRenderFns:[]},l=i("VU/8")(a,s,!1,null,null,null).exports,c={props:{moduleName:{type:String}},data:function(){return{}},methods:{ShowUpdate:function(t){var e=this;this.$store.dispatch(this.setActionName,{CurrentRow:t,update:!0}).then(function(){e.$store.dispatch("AlterTableConfig",{SaleOrderVisible:!0})})},removeRow:function(t){var e=this;this.$confirm("删除金额<"+t.amountfor+">的记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$store.dispatch("DeleteReceivable",{id:t.id}).then(function(){var t=e.$store.state.user.AddReceivable;"success"==t.status?e.$notify.success("操作成功"):e.$notify.error("操作失败! "+t.errmsg),e.$store.dispatch("ARSaleOrderList",{pid:e.pid})})}).catch(function(){})},indexMethod:function(t){return++t}},computed:{tableData:function(){return this.$store.state.user.SaleOrderList.data},Role:function(){return this.$store.state.user.ARSumUserRole},pid:function(){return this.$store.state.user.ARSumCurrentRow.pid},getActionName:function(){return"Get"+this.moduleName},setActionName:function(){return"Set"+this.moduleName}},components:{"v-pagination":l}},u={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sale-list-wapper"},[i("el-table",{staticClass:"no-table-shadow",staticStyle:{transition:"all 0.5s"},attrs:{data:t.tableData,border:"",stripe:""}},[i("el-table-column",{attrs:{type:"index",index:t.indexMethod}}),t._v(" "),i("el-table-column",{attrs:{prop:"amountfor_format",label:"金额",width:"150"}}),t._v(" "),i("el-table-column",{attrs:{prop:"date",label:"日期",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{prop:"is_init",label:"期初",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.is_init?i("el-tag",{attrs:{type:"success"}},[t._v("是")]):t._e()]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"remark",label:"备注",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-popover",{attrs:{placement:"top-start",title:"备注",width:"200",trigger:"hover",content:e.row.remark}},[i("span",{staticClass:"text-hidden",attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(e.row.remark))])])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"remark",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==t.Role.hasRole?i("el-button",{attrs:{type:"success",size:"mini"},nativeOn:{click:function(i){return t.ShowUpdate(e.row)}}},[t._v("修改")]):t._e(),t._v(" "),1==t.Role.hasRole?i("el-button",{attrs:{type:"danger",size:"mini"},nativeOn:{click:function(i){return t.removeRow(e.row)}}},[t._v("删除")]):t._e()]}}])})],1),t._v(" "),i("div",{staticClass:"table-pagination"},[i("v-pagination",{attrs:{moduleName:t.moduleName,actionName:t.getActionName}})],1)],1)},staticRenderFns:[]};var d=i("VU/8")(c,u,!1,function(t){i("TEI/")},"data-v-845f218e",null).exports,m={props:{moduleName:{type:String}},data:function(){return{}},methods:{indexMethod:function(t){return++t},update:function(t){var e=this;this.$store.dispatch(this.setActionName,{CurrentRow:t,update:!0}).then(function(){e.$store.dispatch("AlterTableConfig",{ReceivebillVisible:!0})})},remove:function(t){var e=this;this.$confirm("删除金额<"+t.amountfor+">的记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$store.dispatch("DeleteReceivebill",{id:t.id}).then(function(){var t=e.$store.state.user.AddReceivebill;"success"==t.status?e.$notify.success("操作成功"):e.$notify.error("操作失败! "+t.errmsg),e.$store.dispatch(e.getActionName,{pid:e.pid})})}).catch(function(){})}},computed:{tableData:function(){return this.$store.state.user.ReceiveBillList.data},Role:function(){return this.$store.state.user.ARSumUserRole},getActionName:function(){return"Get"+this.moduleName},setActionName:function(){return"Set"+this.moduleName},pid:function(){return this.$store.state.user.ARSumCurrentRow.pid}},components:{"v-pagination":l}},f={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"receivebill-list-wapper"},[i("el-table",{staticClass:"no-table-shadow",attrs:{data:t.tableData,border:""}},[i("el-table-column",{attrs:{type:"index",index:t.indexMethod}}),t._v(" "),i("el-table-column",{attrs:{prop:"amountfor_format",label:"收款金额",width:"150"}}),t._v(" "),i("el-table-column",{attrs:{prop:"discount",label:"优惠金额",width:"150"}}),t._v(" "),i("el-table-column",{attrs:{prop:"date",label:"业务日期",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{prop:"remark",label:"备注",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-popover",{attrs:{placement:"top-start",title:"备注",width:"200",trigger:"hover",content:e.row.remark}},[i("span",{staticClass:"text-hidden",attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(e.row.remark))])])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"id",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==t.Role.hasRole?i("el-button",{attrs:{type:"success",size:"mini"},nativeOn:{click:function(i){return t.update(e.row)}}},[t._v("修改")]):t._e(),t._v(" "),1==t.Role.hasRole?i("el-button",{attrs:{type:"danger",size:"mini"},nativeOn:{click:function(i){return t.remove(e.row)}}},[t._v("删除")]):t._e()]}}])})],1),t._v(" "),i("div",{staticClass:"table-pagination"},[i("v-pagination",{attrs:{moduleName:t.moduleName,actionName:t.getActionName}})],1)],1)},staticRenderFns:[]};var p=i("VU/8")(m,f,!1,function(t){i("GWPl")},"data-v-dfa4ae14",null).exports,h={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"sale-list-wapper"},[e("el-table",{staticClass:"no-table-shadow",attrs:{data:this.tableData,border:""}})],1)},staticRenderFns:[]};i("VU/8")({data:function(){return{}},methods:{},computed:{tableData:function(){return this.$store.state.user.DiscountList}}},h,!1,function(t){i("7efv")},"data-v-414b9e4a",null).exports;var v={props:{moduleName:{type:String}},data:function(){return{}},methods:{indexMethod:function(t){return++t},update:function(t){var e=this;this.$store.dispatch(this.setActionName,{CurrentRow:t,update:!0}).then(function(){e.$store.dispatch("AlterTableConfig",{RefundVisible:!0})})},remove:function(t){var e=this;this.$confirm("删除金额<"+t.amountfor+">的记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$store.dispatch("RefundDelete",{id:t.id}).then(function(){var t=e.$store.state.user.RefundAdd;"success"==t.status?e.$notify.success("操作成功"):e.$notify.error("操作失败! "+t.errmsg),e.$store.dispatch(e.getActionName,{pid:e.pid})})}).catch(function(){})}},computed:{tableData:function(){return this.$store.state.user.RefundList.data},Role:function(){return this.$store.state.user.ARSumUserRole},getActionName:function(){return"Get"+this.moduleName},setActionName:function(){return"Set"+this.moduleName},pid:function(){return this.$store.state.user.ARSumCurrentRow.pid}},components:{"v-pagination":l}},b={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"refund-list-wapper"},[i("el-table",{staticClass:"no-table-shadow",attrs:{data:t.tableData,border:""}},[i("el-table-column",{attrs:{type:"index",index:t.indexMethod}}),t._v(" "),i("el-table-column",{attrs:{prop:"refund",label:"退款金额"}}),t._v(" "),i("el-table-column",{attrs:{prop:"date",label:"业务日期",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{prop:"remark",label:"备注",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-popover",{attrs:{placement:"top-start",title:"备注",width:"200",trigger:"hover",content:e.row.remark}},[i("span",{staticClass:"text-hidden",attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(e.row.remark))])])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"id",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==t.Role.hasRole?i("el-button",{attrs:{type:"success",size:"mini"},nativeOn:{click:function(i){return t.update(e.row)}}},[t._v("修改")]):t._e(),t._v(" "),1==t.Role.hasRole?i("el-button",{attrs:{type:"danger",size:"mini"},nativeOn:{click:function(i){return t.remove(e.row)}}},[t._v("删除")]):t._e()]}}])})],1),t._v(" "),i("div",{staticClass:"table-pagination"},[i("v-pagination",{attrs:{moduleName:t.moduleName,actionName:t.getActionName}})],1)],1)},staticRenderFns:[]};var g=i("VU/8")(v,b,!1,function(t){i("lMmp")},"data-v-1ea22f4c",null).exports,C={props:{moduleName:{type:String}},data:function(){return{}},methods:{indexMethod:function(t){return++t},update:function(t){var e=this;this.$store.dispatch(this.setActionName,{CurrentRow:t,update:!0}).then(function(){e.$store.dispatch("AlterTableConfig",{RecePlanVisible:!0})})},remove:function(t){var e=this;this.$confirm("删除该收款计划？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$store.dispatch("deleteReceivablePlan",{id:t.id}).then(function(){var t=e.$store.state.user.AddReceivablePlan;"success"==t.status?e.$notify.success("操作成功"):e.$notify.error("操作失败! "+t.errmsg),e.$store.dispatch(e.getActionName,{pid:e.pid})})}).catch(function(){})}},computed:{tableData:function(){return this.$store.state.user.RecePlanList.data},Role:function(){return this.$store.state.user.ARSumUserRole},getActionName:function(){return"Get"+this.moduleName},setActionName:function(){return"Set"+this.moduleName},pid:function(){return this.$store.state.user.ARSumCurrentRow.pid}},components:{"v-pagination":l}},_={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"plan-list-wapper"},[i("el-table",{staticClass:"no-table-shadow",attrs:{data:t.tableData,border:""}},[i("el-table-column",{attrs:{type:"index",index:t.indexMethod}}),t._v(" "),i("el-table-column",{attrs:{prop:"week",label:"周",width:"50"}}),t._v(" "),i("el-table-column",{attrs:{prop:"date",label:"计划日期",width:"200"}}),t._v(" "),i("el-table-column",{attrs:{prop:"content",label:"计划内容"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-popover",{attrs:{placement:"top-start",title:"详细计划内容",width:"200",trigger:"hover",content:e.row.content}},[i("span",{staticClass:"text-hidden",attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(e.row.content))])])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"id",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"success",size:"mini"},nativeOn:{click:function(i){return t.update(e.row)}}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{type:"danger",size:"mini"},nativeOn:{click:function(i){return t.remove(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),i("div",{staticClass:"table-pagination"},[i("v-pagination",{attrs:{moduleName:t.moduleName,actionName:t.getActionName}})],1)],1)},staticRenderFns:[]};var w=i("VU/8")(C,_,!1,function(t){i("CXAo")},"data-v-549db5e5",null).exports,F={data:function(){return{height:"calc(100% - 35px - 100px)",pageSize:10,currentPage:1,month:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],query:{conf:[],offset:0,limit:10,initialization:!0,type:1},expands:[],Tabs:[{name:"销售明细",component:d,moduleName:"SaleOrderList"},{name:"收款明细",component:p,moduleName:"ReceiveBillList"},{name:"退货明细",component:g,moduleName:"RefundList"},{name:"收款计划",component:w,moduleName:"RecePlanList"}],CurrentRow:{},ArrowActiveIndex:!1,DomRefresh:!0}},methods:{init:function(){var t=this;this.updateFilterQuery(),this.$store.dispatch("ARSum",this.query).then(function(){t.initialization=!1}),this.$store.dispatch("InitPagination")},reloadTable:function(){this.updateFilterQuery(),this.$store.dispatch("ARSum",this.query)},indexMethod:function(t){return++t},rowClick:function(t,e,i){if("展开"==i.label){var o=this.expands;this.expands=[],o[0]!=t.rowkey?(this.expands.push(t.rowkey),this.activeRow(t),this.ArrowActiveIndex=t.index):this.ArrowActiveIndex=!1}},getRowKeys:function(t){return t.rowkey},expandChange:function(t,e){e.length?(this.expands=[],t&&(this.expands.push(t.rowkey),this.activeRow(t))):this.expands=[],this.CurrentRow=t},activeRow:function(t){var e=this;this.$store.dispatch("ARSumCurrentRow",t),this.Tabs.forEach(function(i){e.$store.dispatch("Get"+i.moduleName,{pid:t.pid})})},updateFilterQuery:function(){this.$store.dispatch("updateFilterQuery",this.query)},updateFilterQueryParam:function(){this.$store.dispatch("updateFilterQueryParam",{type:1}).then(function(){})},OpenSaleOrderDialog:function(){this.$store.dispatch("AlterTableConfig",{SaleOrderVisible:!0})},OpenReceivebillOrderDialog:function(){this.$store.dispatch("AlterTableConfig",{ReceivebillVisible:!0})},OpenRefundOrderDialog:function(){this.$store.dispatch("AlterTableConfig",{RefundVisible:!0})},OpenRecePlanDialog:function(){this.$store.dispatch("AlterTableConfig",{RecePlanVisible:!0})},OpenChangeCusDialog:function(){this.$store.dispatch("AlterTableConfig",{ChangeCustVisible:!0})},tabClick:function(t){var e=this;this.Tabs.forEach(function(i){i.name==t.label&&(e.$store.state.user[i.moduleName].ready||e.$store.dispatch("Get"+i.moduleName,{pid:e.CurrentRow.pid}))})},pageChange:function(t){this.currentPage=t,this.query.offset=(t-1)*this.query.limit,this.reloadTable()},sizeChange:function(t){this.query.limit=t,this.pageChange(this.currentPage)},OpenViewWindow:function(t){window.open(r.a.BACKEND_DOMAIN_VIEW_URL+"?id="+t+"&token="+this.$store.state.user.token,(new Date).getTime(),"width=800,height=500")}},created:function(){this.init()},activated:function(){this.updateFilterQueryParam()},computed:{tableData:function(){return this.$store.state.user.ARSum},tableLoading:function(){return this.$store.state.user.ARSumLoading},sale:function(){return this.$store.state.user.ARTableConfig.sale},receive:function(){return this.$store.state.user.ARTableConfig.receive},balance:function(){return this.$store.state.user.ARTableConfig.balance},initAmount:function(){return this.$store.state.user.ARTableConfig.init},Role:function(){return this.$store.state.user.ARSumUserRole},user:function(){return this.$store.state.user.userInfo},pagination:function(){return this.$store.state.user.BasePagination},total:function(){return this.$store.state.user.ARSumTotal},ColumnVisible:function(){return this.$store.state.user.ARTableConfig.ColumnVisible},fontSize:function(){var t=this;this.DomRefresh=!1;var e=this.$store.state.user.ARTableConfig.FontSize;return e&&void 0!==e&&this.$nextTick(function(){t.DomRefresh=!0}),e+"px"}}},y={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"cooperate-wallper"},[t.DomRefresh?i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],staticClass:"ar-table",style:{"margin-top":"15px","font-size":t.fontSize},attrs:{border:"",data:t.tableData,height:t.height,"expand-row-keys":t.expands,"row-key":t.getRowKeys,"highlight-current-row":""},on:{"row-click":t.rowClick,"expand-change":t.expandChange}},[i("el-table-column",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"expand",width:"-1"},scopedSlots:t._u([{key:"default",fn:function(e){return e.row.rowkey==t.expands[0]?[i("div",{staticClass:"row-expand"},[i("div",{staticClass:"expand-button"},[i("el-button-group",[t.Role.hasRole?i("el-button",{attrs:{type:"info",size:"mini",icon:"el-icon-sold-out"},nativeOn:{click:function(e){return t.OpenSaleOrderDialog(e)}}},[t._v("添加销售")]):t._e(),t._v(" "),t.Role.hasRole?i("el-button",{attrs:{type:"info",size:"mini",icon:"el-icon-check"},nativeOn:{click:function(e){return t.OpenReceivebillOrderDialog(e)}}},[t._v("添加收款")]):t._e(),t._v(" "),t.Role.hasRole?i("el-button",{attrs:{type:"info",size:"mini",icon:"el-icon-sort"},nativeOn:{click:function(e){return t.OpenRefundOrderDialog(e)}}},[t._v("添加退货")]):t._e(),t._v(" "),t.user.id==e.row.user_id?i("el-button",{attrs:{type:"info",size:"mini",icon:"el-icon-star-on"},nativeOn:{click:function(e){return t.OpenRecePlanDialog(e)}}},[t._v("收款计划")]):t._e(),t._v(" "),t.user.id==e.row.user_id?i("el-button",{attrs:{type:"info",size:"mini",icon:"el-icon-service"},nativeOn:{click:function(e){return t.OpenChangeCusDialog(e)}}},[t._v("设置状态")]):t._e()],1)],1),t._v(" "),e.row.rowkey==t.expands[0]?i("el-tabs",{staticStyle:{transition:"all 0.5s",height:"370px",position:"relative"},attrs:{type:"border-card"},on:{"tab-click":t.tabClick}},t._l(t.Tabs,function(t,e){return i("el-tab-pane",{key:e,staticStyle:{height:"300px",position:"relative"},attrs:{label:t.name}},[i(t.component,{tag:"component",attrs:{moduleName:t.moduleName}})],1)}),1):t._e()],1)]:void 0}}],null,!0)}),t._v(" "),i("el-table-column",{attrs:{prop:"id",fixed:"left",label:"展开",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("i",{staticClass:"el-icon-arrow-right el-icon-arrow-rotate-leave",class:{"el-icon-arrow-rotate-active":e.row.index==t.ArrowActiveIndex}})]}}],null,!1,2174240378)}),t._v(" "),t._e(),t._v(" "),t.ColumnVisible.status_name.value?i("el-table-column",{attrs:{prop:"status_name",label:"状态",fixed:"left",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.nameshow&&"平稳"==e.row.status_name?i("el-tag",{attrs:{type:"success"}},[t._v("平稳")]):t._e(),t._v(" "),1==e.row.nameshow&&"衰减"==e.row.status_name?i("el-tag",{attrs:{type:"warning"}},[t._v("衰减")]):t._e(),t._v(" "),1==e.row.nameshow&&"流失"==e.row.status_name?i("el-tag",{attrs:{type:"info"}},[t._v("流失")]):t._e()]}}],null,!1,1769832579)}):t._e(),t._v(" "),t.ColumnVisible.department.value?i("el-table-column",{attrs:{prop:"department",label:"部门名称",fixed:"left",width:"80"}}):t._e(),t._v(" "),i("el-table-column",{attrs:{prop:"name",label:"客户名称",fixed:"left","min-width":"250"},scopedSlots:t._u([{key:"default",fn:function(e){return 1==e.row.nameshow?[i("el-tooltip",{attrs:{effect:"dark",content:e.row.name,placement:"top"}},[i("a",{staticClass:"tip",staticStyle:{color:"#ff4081"},style:{"font-size":t.fontSize}},[t._v(t._s(e.row.name))])])]:void 0}}],null,!0)}),t._v(" "),i("el-table-column",{attrs:{prop:"project",label:"旗下项目",fixed:"left","min-width":"250"},scopedSlots:t._u([{key:"default",fn:function(e){return""!=e.row.project&&1==e.row.projectshow?[i("el-tooltip",{attrs:{effect:"dark",content:e.row.project,placement:"top"}},[i("span",{staticClass:"tip ",style:{"font-size":t.fontSize}},[t._v(t._s(e.row.project))])])]:void 0}}],null,!0)}),t._v(" "),t.ColumnVisible.protype.value?i("el-table-column",{attrs:{prop:"protype",label:"施工范围",fixed:"left"}}):t._e(),t._v(" "),t.ColumnVisible.affiliate.value?i("el-table-column",{attrs:{prop:"affiliate",label:"挂靠",fixed:"left",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return null!=e.row.affiliate&&""!=e.row.affiliate?[i("el-tooltip",{attrs:{effect:"dark",content:e.row.affiliate,placement:"top"}},[i("span",{staticClass:"tip ",style:{"font-size":t.fontSize}},[t._v("有")])])]:void 0}}],null,!0)}):t._e(),t._v(" "),t.ColumnVisible.user_name.value?i("el-table-column",{attrs:{prop:"user_name",label:"业务员",fixed:"left",width:"120"}}):t._e(),t._v(" "),t.ColumnVisible.tag.value?i("el-table-column",{attrs:{prop:"tag",label:"标签",fixed:"left",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.tag?i("el-tag",{attrs:{type:"success"}},[t._v(t._s(e.row.tag))]):t._e()]}}],null,!1,301147540)}):t._e(),t._v(" "),t.ColumnVisible.cooperation_amountfor.value?i("el-table-column",{attrs:{prop:"cooperation_amountfor",label:"合作金额",fixed:"left",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t"+t._s(e.row.cooperation_amountfor)+"\n\t\t\t")]}}],null,!1,1205429252)}):t._e(),t._v(" "),t.ColumnVisible.estimate.value?i("el-table-column",{attrs:{prop:"estimate",label:"预计金额",width:"150"}}):t._e(),t._v(" "),t.ColumnVisible.agreement.value?i("el-table-column",{attrs:{prop:"agreement",label:"合同",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.agreement?[e.row.attachment?[i("el-popover",{attrs:{placement:"top",title:"合同附件",width:"200",trigger:"hover"}},[i("el-button",{attrs:{type:"success"},nativeOn:{click:function(i){return t.OpenViewWindow(e.row.attachment)}}},[t._v("点击查看")]),t._v(" "),i("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v(t._s(e.row.agreement))])],1)]:i("span",[i("el-tooltip",{attrs:{effect:"dark",content:e.row.agreement,placement:"top"}},[i("a",{staticClass:"tip",staticStyle:{color:"#606266"},style:{"font-size":t.fontSize}},[t._v(t._s(e.row.agreement))])])],1)]:[e.row.attachment?[i("el-popover",{attrs:{placement:"top",title:"合同附件",width:"200",trigger:"hover",content:String(e.row.attachment)}},[i("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v("查看附件")])],1)]:t._e()]]}}],null,!1,2886867720)}):t._e(),t._v(" "),t.ColumnVisible.tax.value?i("el-table-column",{attrs:{prop:"tax",label:"税率",width:"80"}}):t._e(),t._v(" "),t.ColumnVisible.payment_days.value?i("el-table-column",{attrs:{prop:"payment_days",label:"账期",width:"180"}}):t._e(),t._v(" "),t.ColumnVisible.init_data.value?i("el-table-column",{attrs:{prop:"init_data",label:"期初",width:"180"}}):t._e(),t._v(" "),i("el-table-column",{attrs:{prop:"id",label:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t.initAmount?i("div",{staticClass:"month-td"},[t._v("期初")]):t._e(),t._v(" "),t.sale?i("div",{staticClass:"month-td"},[t._v("销售")]):t._e(),t._v(" "),t.receive?i("div",{staticClass:"month-td"},[t._v("回款")]):t._e(),t._v(" "),t.balance?i("div",{staticClass:"month-td"},[t._v("欠款")]):t._e()]}}],null,!1,3157206530)}),t._v(" "),i("el-table-column",{attrs:{label:"每月销量"}},t._l(t.month,function(e,o){return i("el-table-column",{key:o,attrs:{label:e,width:"120"},scopedSlots:t._u([{key:"default",fn:function(n){return t._l(n.row.monthly_sales,function(r,a){return e==r.name?i("span",{key:a},[t.initAmount?i("div",{staticClass:"month-td",class:{stripe:n.row.id%2==0&&o<3}},[t._v(t._s(r.initAmount))]):t._e(),t._v(" "),t.sale?i("div",{staticClass:"month-td",class:{stripe:n.row.id%2==0&&o<5}},[t._v(t._s(r.amountfor))]):t._e(),t._v(" "),t.receive?i("div",{staticClass:"month-td",class:{stripe:n.row.id%2==0&&o<5}},[t._v(t._s(r.real_amountfor))]):t._e(),t._v(" "),t.balance?i("div",{staticClass:"month-td",class:{stripe:n.row.id%2==0&&o<3}},[t._v(t._s(r.arrears))]):t._e()]):t._e()})}}],null,!0)})}),1)],1):t._e(),t._v(" "),i("div",{staticClass:"cooperate-pagination"},[t.total>0?i("el-pagination",{attrs:{small:"",background:"",layout:t.pagination.layout,"page-sizes":t.pagination.pagesizes,"page-size":t.pageSize,total:t.total,"current-page":t.currentPage},on:{"current-change":t.pageChange,"size-change":t.sizeChange}}):t._e()],1)],1)},staticRenderFns:[]};var $=i("VU/8")(F,y,!1,function(t){i("hEBx")},"data-v-b1ee1098",null).exports,x={data:function(){return{height:"calc(100% - 35px - 100px)",query:{date:(new Date).toLocaleDateString(),user_id:0,cust_id:0,pid:0,order:0,agreement:2,limit:15,offset:0,type:0}}},methods:{init:function(){this.$store.dispatch("updatePotentialFilterQueryParam",this.query),this.$store.dispatch("PotentialCustomer",this.query)},indexMethod:function(t){return++t}},activated:function(){this.init()},computed:{tableData:function(){return console.log(this.$store.state.user.PotentialCustomer.row),this.$store.state.user.PotentialCustomer.row},tableLoading:function(){return this.$store.state.user.ARSumLoading},sale:function(){return this.$store.state.user.ARTableConfig.sale},receive:function(){return this.$store.state.user.ARTableConfig.receive},balance:function(){return this.$store.state.user.ARTableConfig.balance}}},R={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],staticClass:"ar-table",staticStyle:{"margin-top":"15px"},attrs:{data:t.tableData,border:"",height:t.height}},[i("el-table-column",{attrs:{prop:"index",label:"序号",fixed:"left",width:"50"}}),t._v(" "),i("el-table-column",{attrs:{prop:"name",label:"客户名称",fixed:"left","min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(e){return 1==e.row.nameshow?[i("el-tooltip",{attrs:{effect:"dark",content:e.row.name,placement:"top"}},[i("a",{staticStyle:{"font-size":"12px",cursor:"pointer",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[t._v(t._s(e.row.name))])])]:void 0}}],null,!0)}),t._v(" "),i("el-table-column",{attrs:{prop:"project",label:"旗下项目",fixed:"left","min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-tooltip",{attrs:{effect:"dark",content:e.row.project,placement:"top"}},[i("span",{staticStyle:{"font-size":"12px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[t._v(t._s(e.row.project))])])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"protype",label:"施工范围",fixed:"left"}}),t._v(" "),i("el-table-column",{attrs:{prop:"user_name",label:"业务员",fixed:"left",width:"80"}}),t._v(" "),i("el-table-column",{attrs:{prop:"tag",label:"标签",fixed:"left",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.tag?i("el-tag",{attrs:{type:"success"}},[t._v(t._s(e.row.tag))]):t._e()]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"estimate",label:"预计金额",fixed:"left"}})],1)},staticRenderFns:[]};var k=i("VU/8")(x,R,!1,function(t){i("LELi")},"data-v-01bf29e4",null).exports,S=i("pFYg"),A=i.n(S),I=i("fZjL"),L=i.n(I),T=i("mvHQ"),D=i.n(T),P={data:function(){return{programmeVisible:!1,CurrentProgramIndex:0,defaultProgram:!1,defaultRowParams:{field:"",value:"",operator:"",logic:"",type:{name:"",list:[]},remote:[],option:[]},conditionRows:[],rowIndex:0,rowEditStatus:!1,remoteLoading:!1,Form:{id:"",name:"",module:this.$route.path},FormRules:{name:[{required:!0,trigger:"blur",message:"请输入方案名称"}]},formWidth:"120px",programmeUpdate:!1,programConf:[],btnDisable:!1,CurrentCondition:[],ConditionIndex:0,DOMRefresh:!0,RefreshFieldStatus:!0,AlreadyInit:!1,ColumnVisibleTemp:{},CurrentOpIndex:0}},methods:{FilterClose:function(){this.$store.dispatch("AlterTableConfig",{FilterVisible:!1})},UpdateColumnStatus:function(){this.$store.dispatch("SetARSumColumnVisible",this.ColumnVisibleTemp)},ChangeProgram:function(t){var e=this;this.CurrentProgramIndex=t,this.defaultProgram=!1,this.list.forEach(function(i){i.id==t&&(e.programConf=i.conf,Boolean(i.default)&&(e.defaultProgram=!0))}),this.btnDisable=0==t,this.condition.forEach(function(i,o){i.id==t&&(e.CurrentCondition=i.conf,e.ConditionIndex=o)}),this.rowIndex=0,this.DOMRefresh=!1,this.$nextTick(function(){e.DOMRefresh=!0})},CreateRow:function(){var t=this,e=JSON.parse(D()(this.defaultRowParams));this.condition[this.ConditionIndex].conf.push(e),this.rowIndex=this.condition[this.ConditionIndex].conf.length-1,this.CurrentCondition=[],this.DOMRefresh=!1,this.$nextTick(function(){t.CurrentCondition=t.condition[t.ConditionIndex].conf,t.DOMRefresh=!0})},RemoveRow:function(){var t=this,e=[];this.condition[this.ConditionIndex].conf.forEach(function(i,o){o!=t.rowIndex&&e.push(i)}),this.condition[this.ConditionIndex].conf=e,this.rowIndex>e.length-1&&(this.rowIndex=e.length-1),e.length<1&&(this.rowIndex=0),this.CurrentCondition=this.condition[this.ConditionIndex].conf},InsertRow:function(){var t=this,e=[];this.condition[this.ConditionIndex].conf.forEach(function(i,o){o==t.rowIndex&&e.push(JSON.parse(D()(t.defaultRowParams))),e.push(i)}),this.condition[this.ConditionIndex].conf=e,this.CurrentCondition=this.condition[this.ConditionIndex].conf},RemoveAll:function(){this.condition[this.ConditionIndex].conf=[],this.condition[this.ConditionIndex].conf.push(JSON.parse(D()(this.defaultRowParams))),this.CurrentCondition=this.condition[this.ConditionIndex].conf,this.rowIndex=0},ChooseRow:function(t){this.rowIndex=t},InitFilter:function(){this.AlreadyInit=!1,this.$store.dispatch("GetARSumFilterTable");var t=JSON.parse(this.$tool.getter("arsum_column_visible"))||{};L()(t).length>0&&this.$store.dispatch("SetARSumColumnVisible",t)},FilterFieldChangeHandle:function(t,e){var i=this;""==this.condition[this.ConditionIndex].conf[t].logic&&(this.condition[this.ConditionIndex].conf[t].logic=1),this.condition[this.ConditionIndex].conf[t].value="",this.condition[this.ConditionIndex].conf[t].type={name:"",list:[]},this.FilterField.forEach(function(o,n){o.value==i.condition[i.ConditionIndex].conf[t].field&&(i.condition[i.ConditionIndex].conf[t].type.name=o.type,void 0!==o.list&&(i.condition[i.ConditionIndex].conf[t].type.list=o.list,o.list.length>0&&(i.condition[i.ConditionIndex].conf[t].value=o.list[0].value))),o.value==e&&(i.condition[i.ConditionIndex].conf[t].operator=o.opearate[0].value,i.condition[i.ConditionIndex].conf[t].option=o.opearate)}),this.RefreshFieldStatus=!1,this.$nextTick(function(){i.RefreshFieldStatus=!0})},opearateChange:function(t){"server"==this.condition[this.ConditionIndex].conf[t].type.name&&(this.condition[this.ConditionIndex].conf[t].value="")},SelectVisibleChange:function(t){this.rowIndex=t},remoteMethod:function(t){var e=this;this.condition[this.ConditionIndex].conf[this.rowIndex].remote=[],t&&this.$store.dispatch("FindARSumFilterValue",{field:this.condition[this.ConditionIndex].conf[this.rowIndex].field,keyword:t}).then(function(){var t=e.$store.state.user.FindARSumFilterValue;t.length>0&&(e.condition[e.ConditionIndex].conf[e.rowIndex].remote=t)})},submitForm:function(){var t=this;this.$refs.Form.validate(function(e){if(e){var i="CreateProgram";t.programmeUpdate&&(i="UpdateProgram"),t.$store.dispatch(i,t.Form).then(function(){var e=t.$store.state.user.CreateProgram;"success"==e.status?(t.$notify.success("操作成功"),t.$refs.Form.resetFields(),t.Form.name="",t.programmeUpdate=!1,t.InitFilter()):t.$notify.error("操作失败!"+e.errmsg),t.programmeVisible=!1})}})},programmeClose:function(){this.$refs.Form.resetFields(),this.Form.name="",this.programmeUpdate=!1,this.programmeVisible=!1},RefreshProgram:function(){this.AlreadyInit=!1,this.$store.dispatch("FilterProgram")},updateProgramName:function(){this.programmeUpdate=!0,this.Form.id=this.list[this.CurrentProgramIndex].id,this.Form.name=this.list[this.CurrentProgramIndex].name,this.programmeVisible=!0},removeProgram:function(){var t=this;this.$confirm("删除该方案, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.CurrentCondition=[],t.$store.dispatch("DeleteProgram",{id:t.CurrentProgramIndex}).then(function(){"success"==t.$store.state.user.CreateProgram.status?(t.$store.dispatch("FilterProgram"),t.$notify.success("删除成功!")):t.$notify.success("删除失败!")})}).catch(function(){})},saveProgram:function(){var t=this,e=this.condition[this.ConditionIndex];e.default=this.defaultProgram,"object"==A()(e.conf)&&null!=e.conf&&e.conf.forEach(function(t,i){e.conf[i].remote=[],e.conf[i].type.list=[]}),e.fontSize=this.FontSize,e.colVisible=this.ColumnVisibleTemp,this.ConditionIndex>0?this.$store.dispatch("UpdateFilterConfig",e).then(function(){var e=t.$store.state.user.UpdateFilterConfig;"success"==e.status?t.$notify.success("保存方案成功"):t.$notify.error("保存方案失败!"+e.errmsg)}):this.$notify.error("请选择一个方案")},QueryData:function(){var t=this,e=this.condition[this.ConditionIndex].conf;this.$store.dispatch("updateFilterQueryParam",{conf:e,initialization:!1}).then(function(){t.$store.dispatch("ARSum",t.$store.state.user.filterQuery).then(function(){t.FilterClose()})})}},computed:{visible:function(){return this.$store.state.user.ARTableConfig.FilterVisible},list:function(){var t=this,e=[{name:"缺省方案",id:0}],i=this.$store.state.user.FilterProgram,o=JSON.parse(D()(this.defaultRowParams));return this.condition=[{id:0,conf:[o]}],this.CurrentCondition=this.condition[0].conf,i.forEach(function(i){i.conf||(i.conf=[JSON.parse(D()(t.defaultRowParams))]),e.push(i),t.condition.push({id:i.id,name:i.name,conf:i.conf}),Boolean(i.default)&&0==t.AlreadyInit&&(t.defaultProgram=!0,t.CurrentProgramIndex=i.id,t.CurrentCondition=t.condition[t.condition.length-1].conf,t.ConditionIndex=t.condition.length-1)}),i.length>0&&(this.AlreadyInit=!0),e},FilterField:function(){return this.$store.state.user.ARSumFilterTable.field},opearator:function(){var t=this.$store.state.user.ARSumFilterTable.field,e=[];return"object"==(void 0===t?"undefined":A()(t))&&t.forEach(function(t){e.push(t.opearate)}),e},logic:function(){return this.$store.state.user.ARSumFilterTable.logic},ColumnVisible:function(){var t=this.$store.state.user.ARTableConfig.ColumnVisible;return this.ColumnVisibleTemp=JSON.parse(D()(t)),t},FontSize:{get:function(){var t=this.$tool.getter("FontSize");return void 0!==t&&t||(t=this.$store.state.user.ARTableConfig.FontSize),Number(t)},set:function(t){var e=this;this.$store.dispatch("SetARSumGlobalFontSize",t).then(function(){e.$tool.setter("FontSize",t)})}}},created:function(){this.InitFilter()},directives:{dialogDrag:{bind:function(t,e,i,o){var n=t.querySelector(".el-dialog__header"),r=t.querySelector(".el-dialog"),a=window.innerHeight,s=window.innerWidth;n.style.cursor="move",n.style["user-select"]="none",n.onmousedown=function(t){var e=window.getComputedStyle(r),i=parseInt(e.width.replace(/px/,"")),o=parseInt(e.height.replace(/px/,"")),n=t.clientX,l=t.clientY,c=parseInt(r.style.left.replace(/\px/g,""))||0,u=parseInt(r.style.top.replace(/\px/,""))||0,d=r.offsetLeft-c,m=r.offsetTop-u;document.onmousemove=function(t){var e=t.clientX-n+c,f=t.clientY-l+u;i+e+d>=s-10&&(e=s-i-d-10),e<-1*d&&(e=-1*d),o+f+m>=a-55&&(f=a-o-m-55),f<-1*m&&(f=-1*m+5),r.style.left=e+"px",r.style.top=f+"px"},document.onmouseup=function(t){document.onmousemove=null,document.onmouseup=null}}}}}},V={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"filter-manager-wapper"},[i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],ref:"dialogDrag",staticClass:"filter-dialog",attrs:{title:"列表过滤",visible:t.visible,"before-close":t.FilterClose,width:"750px"},on:{"update:visible":function(e){t.visible=e}}},[i("div",{staticClass:"filter-container"},[i("div",{staticClass:"filter-program"},[i("div",{staticClass:"filter-action"},[i("el-button-group",[i("el-button",{attrs:{type:"info",size:"mini"},on:{click:function(e){t.programmeVisible=!0}}},[t._v("新建")]),t._v(" "),i("el-button",{attrs:{type:"info",size:"mini",disabled:t.btnDisable},nativeOn:{click:function(e){return t.updateProgramName(e)}}},[t._v("修改")]),t._v(" "),i("el-button",{attrs:{type:"info",size:"mini",disabled:t.btnDisable},nativeOn:{click:function(e){return t.removeProgram(e)}}},[t._v("删除")])],1)],1),t._v(" "),i("div",{staticClass:"program-list"},[i("ul",t._l(t.list,function(e,o){return i("li",{key:o,staticClass:"program-item",class:{"program-active":t.CurrentProgramIndex==e.id},on:{click:function(i){return t.ChangeProgram(e.id)}}},[i("span",{staticClass:"item-name"},[t._v("· "+t._s(e.name))])])}),0)])]),t._v(" "),i("div",{staticClass:"filter-condition"},[i("el-tabs",[i("el-tab-pane",{attrs:{label:"条件"}},[i("div",{staticClass:"condition-container"},[i("div",{staticClass:"condition-action"},[i("span",{staticClass:"action-item",on:{click:t.CreateRow}},[t._v("新增行")]),t._v(" "),i("span",{staticClass:"action-item",on:{click:t.RemoveRow}},[t._v("删除行")]),t._v(" "),i("span",{staticClass:"action-item",on:{click:t.InsertRow}},[t._v("插入行")]),t._v(" "),i("span",{staticClass:"action-item",on:{click:t.RemoveAll}},[t._v("全部删除")])]),t._v(" "),i("div",{staticClass:"condition-list"},[i("div",{staticClass:"condition-list-header"},[i("div",{staticClass:"header-item"},[t._v("#")]),t._v(" "),i("div",{staticClass:"header-item"},[t._v("字段")]),t._v(" "),i("div",{staticClass:"header-item"},[t._v("比较")]),t._v(" "),i("div",{staticClass:"header-item"},[t._v("值")]),t._v(" "),i("div",{staticClass:"header-item"},[t._v("逻辑")]),t._v(" "),i("div",{staticClass:"header-item"},[t._v("#")])]),t._v(" "),i("section",t._l(t.CurrentCondition,function(e,o){return t.DOMRefresh?i("div",{key:o,staticClass:"section-row",on:{"!click":function(e){return t.ChooseRow(o)}}},[i("div",{staticClass:"section-row-item"},[i("i",{class:{"el-icon-caret-right":o==t.rowIndex&&!t.rowEditStatus,"el-icon-edit":o==t.rowIndex&&t.rowEditStatus}})]),t._v(" "),i("div",{staticClass:"section-row-item"},[i("el-select",{on:{change:function(e){return t.FilterFieldChangeHandle(o,t.condition[t.ConditionIndex].conf[o].field)},"visible-change":function(e){return t.SelectVisibleChange(o)}},model:{value:t.condition[t.ConditionIndex].conf[o].field,callback:function(e){t.$set(t.condition[t.ConditionIndex].conf[o],"field",e)},expression:"condition[ConditionIndex].conf[index].field"}},t._l(t.FilterField,function(t,e){return i("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),i("div",{staticClass:"section-row-item"},[i("el-select",{on:{"visible-change":function(e){return t.SelectVisibleChange(o)},change:function(e){return t.opearateChange(o)}},model:{value:t.condition[t.ConditionIndex].conf[o].operator,callback:function(e){t.$set(t.condition[t.ConditionIndex].conf[o],"operator",e)},expression:"condition[ConditionIndex].conf[index].operator"}},t._l(t.condition[t.ConditionIndex].conf[o].option,function(t,e){return i("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),t.RefreshFieldStatus?i("div",{staticClass:"section-row-item"},["input"==t.condition[t.ConditionIndex].conf[o].type.name?i("span",[i("el-input",{attrs:{placeholder:"请输入值"},model:{value:t.condition[t.ConditionIndex].conf[o].value,callback:function(e){t.$set(t.condition[t.ConditionIndex].conf[o],"value",e)},expression:"condition[ConditionIndex].conf[index].value"}})],1):t._e(),t._v(" "),"enumerate"==t.condition[t.ConditionIndex].conf[o].type.name?i("span",["enumerate"==t.condition[t.ConditionIndex].conf[o].type.name?i("el-select",{model:{value:t.condition[t.ConditionIndex].conf[o].value,callback:function(e){t.$set(t.condition[t.ConditionIndex].conf[o],"value",e)},expression:"condition[ConditionIndex].conf[index].value"}},t._l(t.condition[t.ConditionIndex].conf[o].type.list,function(t,e){return i("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1):t._e()],1):t._e(),t._v(" "),t.DOMRefresh?i("span",{ref:"elSelect",refInFor:!0},["server"==t.condition[t.ConditionIndex].conf[o].type.name&&0==t.condition[t.ConditionIndex].conf[o].operator?i("span",[i("el-select",{staticClass:"remote-select",attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入关键词","remote-method":t.remoteMethod,loading:t.remoteLoading},model:{value:t.condition[t.ConditionIndex].conf[o].value,callback:function(e){t.$set(t.condition[t.ConditionIndex].conf[o],"value",e)},expression:"condition[ConditionIndex].conf[index].value"}},t._l(t.condition[t.ConditionIndex].conf[o].remote,function(t,e){return i("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1)],1):t._e(),t._v(" "),"server"==t.condition[t.ConditionIndex].conf[o].type.name&&t.condition[t.ConditionIndex].conf[o].operator>0?i("span",[i("el-input",{attrs:{placeholder:"请输入值"},model:{value:t.condition[t.ConditionIndex].conf[o].value,callback:function(e){t.$set(t.condition[t.ConditionIndex].conf[o],"value",e)},expression:"condition[ConditionIndex].conf[index].value"}})],1):t._e()]):t._e()]):t._e(),t._v(" "),i("div",{staticClass:"section-row-item"},[i("el-select",{on:{"visible-change":function(e){return t.SelectVisibleChange(o)}},model:{value:t.condition[t.ConditionIndex].conf[o].logic,callback:function(e){t.$set(t.condition[t.ConditionIndex].conf[o],"logic",e)},expression:"condition[ConditionIndex].conf[index].logic"}},t._l(t.logic,function(t,e){return i("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1)],1)]):t._e()}),0)])])]),t._v(" "),i("el-tab-pane",{attrs:{label:"显示隐藏列"}},[i("div",{staticClass:"condition-container"},[i("div",{staticClass:"column-list"},[i("section",t._l(t.ColumnVisible,function(e,o){return i("div",{key:o,staticClass:"section-row-item"},[i("el-checkbox",{on:{change:t.UpdateColumnStatus},model:{value:t.ColumnVisibleTemp[o].value,callback:function(e){t.$set(t.ColumnVisibleTemp[o],"value",e)},expression:"ColumnVisibleTemp[key].value"}},[t._v(t._s(e.name))])],1)}),0)])])]),t._v(" "),i("el-tab-pane",{attrs:{label:"其他"}},[i("div",{staticClass:"condition-container"},[i("div",{staticClass:"column-list"},[i("div",{staticClass:"font-size-item"},[i("span",{staticClass:"font-size-item-label"},[t._v("字体大小:")]),t._v(" "),i("div",{staticClass:"font-size-item-slider"},[i("el-slider",{attrs:{max:16,min:12,"show-input":""},model:{value:t.FontSize,callback:function(e){t.FontSize=e},expression:"FontSize"}})],1)])])])])],1)],1)]),t._v(" "),i("div",{staticClass:"footer"},[i("div",{staticClass:"filter-foot"},[i("span",{staticClass:"filter-choose-default"},[i("el-checkbox",{model:{value:t.defaultProgram,callback:function(e){t.defaultProgram=e},expression:"defaultProgram"}},[t._v("下次以此方案自动进入")])],1),t._v(" "),i("span",{staticClass:"foot-btn-group"},[i("el-button",{attrs:{type:"success",size:"mini"},nativeOn:{click:function(e){return t.saveProgram(e)}}},[t._v("保存当前方案")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},nativeOn:{click:function(e){return t.QueryData(e)}}},[t._v("查询")]),t._v(" "),i("el-button",{attrs:{type:"default",size:"mini"},on:{click:this.FilterClose}},[t._v("取消")])],1)])])]),t._v(" "),i("el-dialog",{attrs:{title:"方案",visible:t.programmeVisible,"before-close":t.programmeClose,width:"30%"},on:{"update:visible":function(e){t.programmeVisible=e}}},[i("el-form",{ref:"Form",attrs:{model:t.Form,rules:t.FormRules}},[i("el-form-item",{attrs:{"label-width":t.formWidth,prop:"name",label:"方案名称"}},[i("el-input",{attrs:{placeholder:"请输入方案名"},model:{value:t.Form.name,callback:function(e){t.$set(t.Form,"name",e)},expression:"Form.name"}})],1)],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.programmeVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.submitForm(e)}}},[t._v("提 交")])],1)],1)],1)},staticRenderFns:[]};var O={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.visible?i("div",{staticClass:"filter-manager-wapper"},[i("el-dialog",{attrs:{title:"客户",visible:t.visible,"before-close":t.Close,width:"30%"},on:{"update:visible":function(e){t.visible=e}}},[i("el-form",{ref:"CreateForm",attrs:{model:t.form,rules:t.FormRules}},[i("el-form-item",{attrs:{label:"客户名称",prop:"name","label-width":t.formLabelWidth}},[i("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name","string"==typeof e?e.trim():e)},expression:"form.name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"客户类型",prop:"type","label-width":t.formLabelWidth}},[i("el-select",{on:{change:t.CustypeChange},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},t._l(t.custype,function(t,e){return i("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),t.CustypeStatus?i("el-form-item",{attrs:{label:"客户状态",prop:"status","label-width":t.formLabelWidth}},[i("el-select",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(t.FormField.F_CMK_CUSTATUS,function(t,e){return i("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1)],1):t._e()],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.Close}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.submitForm(e)}}},[t._v("提 交")])],1)],1)],1):t._e()},staticRenderFns:[]};var N={data:function(){return{loadingCust:!1,formLabelWidth:"100px",CreateForm:{name:"",cust_id:"",phone_num:"",tid:"",affiliate:"",estimate:"",tax:"",tag:"",agreement:"",payment_days:""},FormRules:{cust_id:[{required:!0,trigger:"blur",message:"请选择客户"}],name:[{required:!0,trigger:"blur",message:"请填写项目名称"}],tid:[{required:!0,trigger:"blur",message:"请选择项目属性"}],tag:[{required:!0,trigger:"blur",message:"请选择标签属性"}],phone_num:[{required:!0,trigger:"blur",message:"请输入电话号码"},{validator:this.onlyNumber,trigger:"blur"}]},CustList:[],fileList:[]}},methods:{NewCust:function(){this.$store.dispatch("AlterTableConfig",{CreateCustVisible:!0})},Close:function(){for(var t in this.CreateForm)"tid"==t&&"tag"==t||(this.CreateForm[t]="");this.$store.dispatch("AlterTableConfig",{CreateProVisible:!1})},remoteMethod:function(t){var e=this;""!==t?(this.loadingCust=!0,this.$store.dispatch("SearchCust",{keyword:t,type:"cooperate"}).then(function(){e.CustList=e.$store.state.user.SearchCust,e.loadingCust=!1})):this.CustList=[]},submitForm:function(){var t=this;this.$refs.CreateForm.validate(function(e){if(e){var i=new FormData;for(var o in t.CreateForm)i.append(o,t.CreateForm[o]);t.fileList.length>0&&i.append("AgreementAtta",t.fileList[0].file),t.$store.dispatch("AddProject",i).then(function(){var e=t.$store.state.user.AddProject;"success"==e.status?(t.$notify.success("操作成功"),t.fileList=[],t.Close(),t.resetForm("CreateForm"),t.updateTable()):t.$notify.error("操作失败, "+e.errmsg)})}})},uploadAttachment:function(){this.$refs.FileInput.click()},AttachmentChange:function(t){var e=t.target.files[0];this.fileList=[{key:this.FileUniqueKey(),name:e.name,file:e}]},removeFile:function(t){for(var e in this.fileList)this.fileList[e].key==t&&this.fileList.splice(e,1)},FileUniqueKey:function(){for(var t="qazxswedcvfrtgbnhyujmkiolp1029384756",e="",i=0;i<10;++i){e+=t[Math.floor(Math.random()*t.length)]}return e},onlyNumber:function(t,e,i){/^[0-9\-]+$/.test(e)?i():i(new Error("请输入正确的号码"))},updateTable:function(){var t=this.$store.state.user.filterQuery;this.$store.dispatch("ARSum",t)},resetForm:function(t){this.$refs[t].resetFields()}},computed:{visible:function(){return this.$store.state.user.ARTableConfig.CreateProVisible},FIELD:function(){return this.CreateForm.tid=this.$store.state.user.FIELDS.F_CMK_PROATTR[0].value,this.CreateForm.tag=this.$store.state.user.FIELDS.F_CMK_CUSTAG[0].value,this.$store.state.user.FIELDS}}},U={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.visible?i("div",{staticClass:"create-project-wapper"},[i("el-dialog",{attrs:{title:"项目",visible:t.visible,"before-close":t.Close,width:"30%"},on:{"update:visible":function(e){t.visible=e}}},[i("el-form",{ref:"CreateForm",attrs:{model:t.CreateForm,rules:t.FormRules}},[i("el-form-item",{attrs:{label:"客户名称","label-width":t.formLabelWidth,prop:"cust_id"}},[i("div",{staticStyle:{width:"100%",display:"flex"}},[i("el-select",{staticStyle:{flex:"1"},attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入客户名称关键词","remote-method":t.remoteMethod,loading:t.loadingCust},model:{value:t.CreateForm.cust_id,callback:function(e){t.$set(t.CreateForm,"cust_id",e)},expression:"CreateForm.cust_id"}},[i("el-option-group",{attrs:{label:"搜索结果"}},t._l(t.CustList,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),i("span",{staticStyle:{"margin-left":"15px","flex-basis":"100px"}},[i("el-button",{attrs:{icon:"el-icon-plus",type:"success",size:"mini"},nativeOn:{click:function(e){return t.NewCust(e)}}},[t._v("\n\t\t\t\t\t\t\t新增客户\n\t\t\t\t\t\t")])],1)],1)]),t._v(" "),i("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"项目名称",prop:"name"}},[i("el-input",{model:{value:t.CreateForm.name,callback:function(e){t.$set(t.CreateForm,"name","string"==typeof e?e.trim():e)},expression:"CreateForm.name"}})],1),t._v(" "),i("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"施工范围",prop:"tid"}},[i("el-select",{staticClass:"CreateForm-select",model:{value:t.CreateForm.tid,callback:function(e){t.$set(t.CreateForm,"tid",e)},expression:"CreateForm.tid"}},t._l(t.FIELD.F_CMK_PROATTR,function(t,e){return i("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),i("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"联系电话",prop:"phone_num"}},[i("el-input",{attrs:{placeholder:"项目联系电话"},model:{value:t.CreateForm.phone_num,callback:function(e){t.$set(t.CreateForm,"phone_num","string"==typeof e?e.trim():e)},expression:"CreateForm.phone_num"}})],1),t._v(" "),i("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"标签",prop:"tag"}},[i("el-select",{staticClass:"CreateForm-select",model:{value:t.CreateForm.tag,callback:function(e){t.$set(t.CreateForm,"tag",e)},expression:"CreateForm.tag"}},t._l(t.FIELD.F_CMK_CUSTAG,function(t,e){return i("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),i("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"挂靠信息"}},[i("el-input",{attrs:{placeholder:"如无挂靠信息则可以留空"},model:{value:t.CreateForm.affiliate,callback:function(e){t.$set(t.CreateForm,"affiliate","string"==typeof e?e.trim():e)},expression:"CreateForm.affiliate"}})],1),t._v(" "),i("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"预计金额"}},[i("el-input",{attrs:{placeholder:"项目的预计合作金额"},model:{value:t.CreateForm.estimate,callback:function(e){t.$set(t.CreateForm,"estimate","string"==typeof e?e.trim():e)},expression:"CreateForm.estimate"}})],1),t._v(" "),i("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"税率"}},[i("el-input",{attrs:{placeholder:"项目的税率"},model:{value:t.CreateForm.tax,callback:function(e){t.$set(t.CreateForm,"tax","string"==typeof e?e.trim():e)},expression:"CreateForm.tax"}})],1),t._v(" "),i("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"账期"}},[i("el-input",{attrs:{placeholder:"项目账期"},model:{value:t.CreateForm.payment_days,callback:function(e){t.$set(t.CreateForm,"payment_days","string"==typeof e?e.trim():e)},expression:"CreateForm.payment_days"}})],1),t._v(" "),i("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"合同"}},[i("el-input",{attrs:{placeholder:"合同信息"},model:{value:t.CreateForm.agreement,callback:function(e){t.$set(t.CreateForm,"agreement","string"==typeof e?e.trim():e)},expression:"CreateForm.agreement"}})],1),t._v(" "),i("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"合同附件"}},[i("div",{staticClass:"attachment"},[i("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[i("input",{ref:"FileInput",attrs:{type:"file"},on:{change:function(e){return t.AttachmentChange(e)}}})]),t._v(" "),i("div",{staticClass:"attachment-item"},[i("div",{staticClass:"file-button"},[i("el-button",{attrs:{type:"success",size:"mini"},nativeOn:{click:function(e){return t.uploadAttachment(e)}}},[t._v("上传附件")])],1),t._v(" "),i("div",{staticClass:"file-list"},t._l(t.fileList,function(e,o){return i("div",{key:o,staticClass:"file-item"},[i("span",{staticClass:"file-item-name"},[t._v(t._s(e.name))]),t._v(" "),i("span",{on:{click:function(i){return t.removeFile(e.key)}}},[i("i",{staticClass:"el-icon-circle-check"}),t._v(" "),i("i",{staticClass:"el-icon-close"})])])}),0)])])])],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.Close}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("提 交")])],1)],1)],1):t._e()},staticRenderFns:[]};var z={data:function(){return{fileList:[],upStatus:!1,headers:{},token:"",appUrl:"",uploadUrl:"",upSuccess:0,upFail:[],uploading:!1,UploadButtonVisible:!1,ImportResultVisible:!1}},methods:{init:function(){this.InitUpload()},InitUpload:function(){var t=this;this.$store.dispatch("ARUploadUrl").then(function(e){t.token=e.token,t.headers={authorization:"Bearer "+t.token,"X-Requested-With":"XMLHttpRequest"},t.appUrl=e.url,t.uploadUrl=t.appUrl+"realcustomer/import"})},uploadSuccess:function(t,e,i){"success"==t.status&&(this.upSuccess=t.success,this.upFail=t.fail,this.uploading=!1,this.upStatus=!0,this.$store.dispatch("ARSum",this.$store.state.user.filterQuery))},handleBeforeUpload:function(t){var e=t.name.substring(t.name.lastIndexOf("."));".xlsx"!=e&&".xls"!=e?this.fileList=[]:this.fileList[0]=t,this.fileList.length>0&&(this.UploadButtonVisible=!0)},handleBeforeRemove:function(t,e){this.UploadButtonVisible=!1},downloadTemplate:function(){window.open(this.appUrl+"realcustomer/template?token="+this.token,"模板下载")},submitUpload:function(){this.fileList.length<1||this.upStatus||(this.uploading=!0,this.$refs.upload.submit())},Close:function(){this.$store.dispatch("AlterTableConfig",{ImportVisible:!1})},uploadClose:function(){this.fileList=[],this.upStatus=!1},resetUpload:function(){this.upStatus=!1,this.UploadButtonVisible=!1,this.fileList=[]}},created:function(){this.init()},computed:{visible:function(){return this.$store.state.user.ARTableConfig.ImportVisible}}},W={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.visible?i("div",{staticClass:"filter-manager-wapper"},[i("el-dialog",{attrs:{width:"30%",title:"导入客户",visible:t.visible,"before-close":t.Close,"append-to-body":""},on:{"update:visible":function(e){t.visible=e}}},[i("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{headers:t.headers,action:t.uploadUrl,"on-success":t.uploadSuccess,limit:1,"on-change":t.handleBeforeUpload,"before-remove":t.handleBeforeRemove,"file-list":t.fileList,"auto-upload":!1}},[i("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"info",size:"small"},nativeOn:{click:function(e){return t.downloadTemplate(e)}}},[t._v("模板下载")]),t._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只支持excel文件的导入")])],1),t._v(" "),t.upStatus?i("p",{staticStyle:{"font-size":"12px"}},[t._v("操作完成，成功"+t._s(t.upSuccess)+"个, "),i("el-button",{attrs:{type:"text"},nativeOn:{click:function(e){t.ImportResultVisible=!0}}},[t._v("失败"+t._s(t.upFail.length)+"个。点击查看")])],1):t._e(),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t.UploadButtonVisible?i("el-button",{attrs:{size:"small",type:"success",loading:t.uploading},on:{click:t.submitUpload}},[t._v("确定导入")]):t._e(),t._v(" "),i("el-button",{attrs:{type:"warning"},on:{click:t.resetUpload}},[t._v("重置表单")]),t._v(" "),i("el-button",{on:{click:t.Close}},[t._v("取 消")])],1)],1),t._v(" "),i("el-dialog",{attrs:{width:"30%",title:"导入失败",visible:t.ImportResultVisible,"append-to-body":""},on:{"update:visible":function(e){t.ImportResultVisible=e}}},[i("el-table",{attrs:{data:t.upFail,height:"200px"}},[i("el-table-column",{attrs:{prop:"name",label:"客户名称"}})],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.ImportResultVisible=!1}}},[t._v("关闭")])],1)],1)],1):t._e()},staticRenderFns:[]};var E={data:function(){return{ShowInit:!0,formLabelWidth:"120px",Form:{id:"",cust_id:"",name:"",pid:"",project:"",date:"",is_init:!0,amountfor:"",remark:""},Rules:{pid:[{required:!0,message:"请选择项目",trigger:"blur"}],date:[{required:!0,message:"请选择收款日期",trigger:"blur"}],amountfor:[{required:!0,message:"请录入金额",trigger:"blur"},{validator:this.onlyNumber,trigger:"blur"}]},pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()},shortcuts:[{text:"今天",onClick:function(t){t.$emit("pick",new Date)}},{text:"昨天",onClick:function(t){var e=new Date;e.setTime(e.getTime()-864e5),t.$emit("pick",e)}},{text:"一周前",onClick:function(t){var e=new Date;e.setTime(e.getTime()-6048e5),t.$emit("pick",e)}}]},error:{status:!1,msg:"请选择项目"}}},methods:{SaleOrderClose:function(){this.$store.dispatch("AlterTableConfig",{SaleOrderVisible:!1})},onlyNumber:function(t,e,i){/^[0-9\.\-]+$/.test(e)?i():i(new Error("金额必须是数字"))},OpenSaleOrder:function(){if(this.SaleData.update){var t=this.SaleData.CurrentRow;this.Form.id=t.id,this.Form.amountfor=t.amountfor,this.Form.remark=t.remark,this.Form.date=t.date,this.Form.is_init=Boolean(t.is_init),this.Form.cust_id=this.row.cust_id,this.Form.project=this.row.project,this.Form.pid=this.row.pid,this.Form.name=this.row.name}else for(var e in this.Form)void 0!==this.row[e]&&(this.Form[e]=this.row[e])},submitForm:function(){var t=this;if(!this.Form.cust_id||!this.Form.pid)return this.error.msg="项目或者客户不能为空！没有项目则请先创建项目",this.error.status=!0,!1;this.$refs.Form.validate(function(e){if(e){var i="AddReceivable";t.SaleData.update&&(i="UpdateReceivable"),t.Form.is_init=Number(t.Form.is_init),t.$store.dispatch(i,t.Form).then(function(){var e=t.$store.state.user.AddReceivable;"success"==e.status?(t.$notify.success("操作成功"),t.Form.amountfor="",t.Form.remark="",t.SaleOrderClose(),t.$store.dispatch("GetSaleOrderList",{pid:t.Form.pid}),t.$store.dispatch("SetSaleOrderList",{CurrentRow:{},update:!1}),t.$refs.Form.resetFields()):t.$notify.error("操作失败!"+e.errmsg)})}})}},computed:{visible:function(){return this.$store.state.user.ARTableConfig.SaleOrderVisible},row:function(){return this.$store.state.user.ARSumCurrentRow},SaleData:function(){return this.$store.state.user.SaleOrderList}}},B={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"filter-manager-wapper"},[i("el-dialog",{attrs:{title:"销售应收",visible:t.visible,"before-close":t.SaleOrderClose,width:"30%"},on:{"update:visible":function(e){t.visible=e},open:t.OpenSaleOrder}},[i("el-form",{ref:"Form",staticStyle:{width:"100%"},attrs:{model:t.Form,rules:t.Rules}},[i("el-form-item",{attrs:{label:"客户名称","label-width":t.formLabelWidth}},[i("span",{staticClass:"form-item-names"},[t._v(t._s(t.Form.name))])]),t._v(" "),i("el-form-item",{attrs:{label:"项目名称","label-width":t.formLabelWidth}},[i("span",{staticClass:"form-item-names"},[t._v(t._s(t.Form.project))])]),t._v(" "),i("el-form-item",{attrs:{label:"应收款金额","label-width":t.formLabelWidth,prop:"amountfor"}},[i("el-input",{attrs:{placeholder:"请输入应收款金额"},model:{value:t.Form.amountfor,callback:function(e){t.$set(t.Form,"amountfor","string"==typeof e?e.trim():e)},expression:"Form.amountfor"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"业务日期","label-width":t.formLabelWidth,prop:"date"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{align:"right",type:"date",placeholder:"选择日期","picker-options":t.pickerOptions},model:{value:t.Form.date,callback:function(e){t.$set(t.Form,"date",e)},expression:"Form.date"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"备注","label-width":t.formLabelWidth,prop:"remark"}},[i("el-input",{attrs:{placeholder:"备注内容"},model:{value:t.Form.remark,callback:function(e){t.$set(t.Form,"remark","string"==typeof e?e.trim():e)},expression:"Form.remark"}})],1),t._v(" "),t.row.has_init?i("el-form-item",{attrs:{label:"是否期初","label-width":t.formLabelWidth}},[i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.Form.is_init,callback:function(e){t.$set(t.Form,"is_init",e)},expression:"Form.is_init"}})],1):t._e()],1),t._v(" "),t.error.status?i("p",{staticClass:"errmsg"},[t._v(t._s(t.error.msg))]):t._e(),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.SaleOrderClose}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("提 交")])],1)],1)],1)},staticRenderFns:[]};var q={data:function(){return{formLabelWidth:"120px",Form:{id:"",name:"",project:"",amountfor:"",date:"",remark:"",pid:"",cust_id:"",discount:0},Rules:{pid:[{required:!0,message:"请选择项目",trigger:"blur"}],date:[{required:!0,message:"请选择收款日期",trigger:"blur"}],amountfor:[{required:!0,message:"请录入金额",trigger:"blur"},{validator:this.onlyNumber,trigger:"blur"}],discount:[{required:!0,message:"请录入优惠，如无优惠请默认0",trigger:"blur"},{validator:this.onlyNumber,trigger:"blur"}]},pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()},shortcuts:[{text:"今天",onClick:function(t){t.$emit("pick",new Date)}},{text:"昨天",onClick:function(t){var e=new Date;e.setTime(e.getTime()-864e5),t.$emit("pick",e)}},{text:"一周前",onClick:function(t){var e=new Date;e.setTime(e.getTime()-6048e5),t.$emit("pick",e)}}]}}},methods:{Close:function(){this.$store.dispatch("AlterTableConfig",{ReceivebillVisible:!1})},Open:function(){this.Form.name=this.row.name,this.Form.project=this.row.project,this.Form.cust_id=this.row.cust_id,this.Form.pid=this.row.pid,this.BillData.update&&(this.Form.id=this.BillData.CurrentRow.id,this.Form.amountfor=this.BillData.CurrentRow.amountfor,this.Form.date=this.BillData.CurrentRow.date,this.Form.remark=this.BillData.CurrentRow.remark,this.Form.discount=this.BillData.CurrentRow.discount)},submitForm:function(){var t=this;this.$refs.Form.validate(function(e){if(e){var i="AddReceivebill";t.BillData.update&&(i="UpdateReceivebill"),t.$store.dispatch(i,t.Form).then(function(){var e=t.$store.state.user.AddReceivebill;"success"==e.status?(t.$notify.success("操作成功"),t.Form.amountfor="",t.Form.remark="",t.Form.discount=0,t.$store.dispatch("SetReceiveBillList",{update:!1,CurrentRow:{}}),t.$store.dispatch("GetReceiveBillList",{pid:t.Form.pid}),t.$refs.Form.resetFields()):t.$notify.error("操作失败!"+e.errmsg),t.Close()})}})},onlyNumber:function(t,e,i){/^[0-9\.\-]+$/.test(e)?i():i(new Error("金额必须是数字"))}},computed:{visible:function(){return this.$store.state.user.ARTableConfig.ReceivebillVisible},row:function(){return this.$store.state.user.ARSumCurrentRow},BillData:function(){return this.$store.state.user.ReceiveBillList}}},M={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"receivebill-wappe"},[i("el-dialog",{attrs:{title:"收款",visible:t.visible,"before-close":t.Close,width:"30%"},on:{"update:visible":function(e){t.visible=e},open:t.Open}},[i("el-form",{ref:"Form",staticStyle:{width:"100%"},attrs:{model:t.Form,rules:t.Rules}},[i("el-form-item",{attrs:{label:"客户名称","label-width":t.formLabelWidth}},[i("span",{staticClass:"form-item-names"},[t._v(t._s(t.Form.name))])]),t._v(" "),i("el-form-item",{attrs:{label:"项目名称","label-width":t.formLabelWidth}},[i("span",{staticClass:"form-item-names"},[t._v(t._s(t.Form.project))])]),t._v(" "),i("el-form-item",{attrs:{label:"收款金额","label-width":t.formLabelWidth,prop:"amountfor"}},[i("el-input",{attrs:{placeholder:"请输入收款金额"},model:{value:t.Form.amountfor,callback:function(e){t.$set(t.Form,"amountfor","string"==typeof e?e.trim():e)},expression:"Form.amountfor"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"优惠金额","label-width":t.formLabelWidth,prop:"discount"}},[i("el-input",{attrs:{placeholder:"请输入收款金额"},model:{value:t.Form.discount,callback:function(e){t.$set(t.Form,"discount","string"==typeof e?e.trim():e)},expression:"Form.discount"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"业务日期","label-width":t.formLabelWidth,prop:"date"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{align:"right",type:"date",placeholder:"选择日期","picker-options":t.pickerOptions},model:{value:t.Form.date,callback:function(e){t.$set(t.Form,"date",e)},expression:"Form.date"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"备注","label-width":t.formLabelWidth,prop:"remark"}},[i("el-input",{attrs:{placeholder:"备注内容"},model:{value:t.Form.remark,callback:function(e){t.$set(t.Form,"remark","string"==typeof e?e.trim():e)},expression:"Form.remark"}})],1)],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.Close}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.submitForm(e)}}},[t._v("提 交")])],1)],1)],1)},staticRenderFns:[]};var j={props:{},data:function(){return{formLabelWidth:"120px",Form:{id:"",name:"",project:"",refund:"",date:"",remark:"",pid:"",cust_id:""},Rules:{pid:[{required:!0,message:"请选择项目",trigger:"blur"}],date:[{required:!0,message:"请选择退货日期",trigger:"blur"}],refund:[{required:!0,message:"请录入金额",trigger:"blur"},{validator:this.onlyNumber,trigger:"blur"}]},pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()},shortcuts:[{text:"今天",onClick:function(t){t.$emit("pick",new Date)}},{text:"昨天",onClick:function(t){var e=new Date;e.setTime(e.getTime()-864e5),t.$emit("pick",e)}},{text:"一周前",onClick:function(t){var e=new Date;e.setTime(e.getTime()-6048e5),t.$emit("pick",e)}}]}}},computed:{visible:function(){return this.$store.state.user.ARTableConfig.RefundVisible},row:function(){return this.$store.state.user.ARSumCurrentRow},RefundData:function(){return this.$store.state.user.RefundList}},created:function(){},mounted:function(){},watch:{},methods:{Close:function(){this.$store.dispatch("AlterTableConfig",{RefundVisible:!1})},Open:function(){this.Form.name=this.row.name,this.Form.project=this.row.project,this.Form.cust_id=this.row.cust_id,this.Form.pid=this.row.pid,this.RefundData.update&&(this.Form.id=this.RefundData.CurrentRow.id,this.Form.refund=this.RefundData.CurrentRow.refund,this.Form.date=this.RefundData.CurrentRow.date,this.Form.remark=this.RefundData.CurrentRow.remark)},onlyNumber:function(t,e,i){/^[0-9\.\-]+$/.test(e)?i():i(new Error("金额必须是数字"))},submitForm:function(){var t=this;this.$refs.Form.validate(function(e){if(e){var i="RefundAdd";t.RefundData.update&&(i="RefundUpdate"),t.$store.dispatch(i,t.Form).then(function(){var e=t.$store.state.user.RefundAdd;"success"==e.status?(t.$notify.success("操作成功"),t.$refs.Form.resetFields(),t.Form.refund="",t.Form.remark="",t.$store.dispatch("GetRefundList",{pid:t.Form.pid}),t.$store.dispatch("SetRefundList",{update:!1,CurrentRow:{}})):t.$notify.error("操作失败!"+e.errmsg),t.Close()})}})}},components:{}},Q={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"refund-dialog-wapper"},[i("el-dialog",{attrs:{title:"退货",visible:t.visible,"before-close":t.Close,width:"30%"},on:{"update:visible":function(e){t.visible=e},open:t.Open}},[i("el-form",{ref:"Form",staticStyle:{width:"100%"},attrs:{model:t.Form,rules:t.Rules}},[i("el-form-item",{attrs:{label:"客户名称","label-width":t.formLabelWidth}},[i("span",{staticClass:"form-item-names"},[t._v(t._s(t.Form.name))])]),t._v(" "),i("el-form-item",{attrs:{label:"项目名称","label-width":t.formLabelWidth}},[i("span",{staticClass:"form-item-names"},[t._v(t._s(t.Form.project))])]),t._v(" "),i("el-form-item",{attrs:{label:"退货金额","label-width":t.formLabelWidth,prop:"refund"}},[i("el-input",{attrs:{placeholder:"请输入退款金额"},model:{value:t.Form.refund,callback:function(e){t.$set(t.Form,"refund","string"==typeof e?e.trim():e)},expression:"Form.refund"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"退货日期","label-width":t.formLabelWidth,prop:"date"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{align:"right",type:"date",placeholder:"选择日期","picker-options":t.pickerOptions},model:{value:t.Form.date,callback:function(e){t.$set(t.Form,"date",e)},expression:"Form.date"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"备注","label-width":t.formLabelWidth,prop:"remark"}},[i("el-input",{attrs:{placeholder:"备注内容"},model:{value:t.Form.remark,callback:function(e){t.$set(t.Form,"remark","string"==typeof e?e.trim():e)},expression:"Form.remark"}})],1)],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.Close}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.submitForm(e)}}},[t._v("提 交")])],1)],1)],1)},staticRenderFns:[]};var K={props:{},data:function(){return{formLabelWidth:"120px",Form:{id:"",name:"",project:"",cust_id:"",pid:"",content:"",date:""},Rules:{pid:[{required:!0,message:"请选择项目",trigger:"blur"}],date:[{required:!0,message:"请选择收款日期",trigger:"blur"}],content:[{required:!0,message:"请输入计划内容",trigger:"blur"}]}}},computed:{visible:function(){return this.$store.state.user.ARTableConfig.RecePlanVisible},row:function(){return this.$store.state.user.ARSumCurrentRow},RecePlanData:function(){return this.$store.state.user.RecePlanList}},created:function(){},mounted:function(){},watch:{},methods:{Open:function(){this.Form.name=this.row.name,this.Form.project=this.row.project,this.Form.cust_id=this.row.cust_id,this.Form.pid=this.row.pid,this.RecePlanData.update&&(this.Form.id=this.RecePlanData.CurrentRow.id,this.Form.content=this.RecePlanData.CurrentRow.content)},Close:function(){this.$store.dispatch("AlterTableConfig",{RecePlanVisible:!1})},submitForm:function(){var t=this;this.$refs.Form.validate(function(e){if(e){var i="AddReceivablePlan";t.RecePlanData.update&&(i="updateReceivablePlan"),t.$store.dispatch(i,t.Form).then(function(){var e=t.$store.state.user.AddReceivablePlan;console.log(e),"success"==e.status?(t.$notify.success("操作成功"),t.Form.content="",t.$refs.Form.resetFields(),t.$store.dispatch("SetRecePlanList",{update:!1,CurrentRow:{}}),t.$store.dispatch("GetRecePlanList",{pid:t.Form.pid}),t.Close()):t.$notify.error("操作失败!"+e.errmsg)})}})}},components:{}},G={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"receplan-wapper"},[i("el-dialog",{attrs:{title:"收款计划",visible:t.visible,"before-close":t.Close,width:"30%"},on:{"update:visible":function(e){t.visible=e},open:t.Open}},[i("el-form",{ref:"Form",staticStyle:{width:"100%"},attrs:{model:t.Form,rules:t.Rules}},[i("el-form-item",{attrs:{label:"客户名称","label-width":t.formLabelWidth}},[i("span",{staticClass:"form-item-names"},[t._v(t._s(t.Form.name))])]),t._v(" "),i("el-form-item",{attrs:{label:"项目名称","label-width":t.formLabelWidth}},[i("span",{staticClass:"form-item-names"},[t._v(t._s(t.Form.project))])]),t._v(" "),i("el-form-item",{attrs:{label:"收款计划","label-width":t.formLabelWidth,prop:"content"}},[i("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入计划内容"},model:{value:t.Form.content,callback:function(e){t.$set(t.Form,"content","string"==typeof e?e.trim():e)},expression:"Form.content"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"周期","label-width":t.formLabelWidth,prop:"date"}},[i("el-date-picker",{attrs:{type:"week",format:"yyyy 第 WW 周",placeholder:"选择周","picker-options":{firstDayOfWeek:1}},model:{value:t.Form.date,callback:function(e){t.$set(t.Form,"date",e)},expression:"Form.date"}})],1)],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.Close}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.submitForm(e)}}},[t._v("提 交")])],1)],1)],1)},staticRenderFns:[]};var H={props:{},data:function(){return{formLabelWidth:"120px",form:{id:"",status:""},FormRules:{id:[{require:!0,message:"请选择客户"}],status:[{required:!0,trigger:"blur",message:"请选择客户状态"}]}}},computed:{visible:function(){return this.$store.state.user.ARTableConfig.ChangeCustVisible},FormField:function(){return this.$store.state.user.FIELDS},row:function(){return this.$store.state.user.ARSumCurrentRow}},created:function(){},mounted:function(){},watch:{},methods:{Close:function(){this.$store.dispatch("AlterTableConfig",{ChangeCustVisible:!1})},Open:function(){this.form.id=this.row.cust_id,this.form.status=Number(this.row.status)},submitForm:function(){var t=this;this.$refs.Form.validate(function(e){e&&t.$store.dispatch("UpdateCustStatus",t.form).then(function(){"success"==t.$store.state.user.CustStatus.status?(t.$notify.success("操作成功"),t.form.id="",t.form.status="",t.$refs.Form.resetFields(),t.$store.dispatch("ARSum",t.$store.state.user.filterQuery)):t.$notify.error("操作失败"),t.Close()})})}},components:{}},X={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"change-customer-status"},[i("el-dialog",{attrs:{title:"客户状态",visible:t.visible,"before-close":t.Close,width:"30%"},on:{"update:visible":function(e){t.visible=e},open:t.Open}},[i("el-form",{ref:"Form",attrs:{model:t.form,rules:t.FormRules}},[i("el-form-item",{attrs:{label:"客户名称",prop:"name","label-width":t.formLabelWidth}},[i("span",{staticClass:"form-item-names"},[t._v(t._s(t.row.name))])]),t._v(" "),i("el-form-item",{attrs:{label:"客户状态",prop:"status","label-width":t.formLabelWidth}},[i("el-select",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(t.FormField.F_CMK_CUSTATUS,function(t,e){return i("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1)],1)],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.Close}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.submitForm(e)}}},[t._v("提 交")])],1)],1)],1)},staticRenderFns:[]};var J={data:function(){return{loadingCust:!1,formLabelWidth:"100px",CreateForm:{name:"",cust_id:"",phone_num:"",tid:"",estimate:"",tag:""},FormRules:{cust_id:[{required:!0,trigger:"blur",message:"请选择客户"}],name:[{required:!0,trigger:"blur",message:"请填写项目名称"}],tid:[{required:!0,trigger:"blur",message:"请选择项目属性"}],tag:[{required:!0,trigger:"blur",message:"请选择标签属性"}],phone_num:[{validator:this.onlyNumber,trigger:"blur"}]},CustList:[]}},methods:{NewCust:function(){this.$store.dispatch("AlterTableConfig",{CreateCustVisible:!0})},Close:function(){for(var t in this.CreateForm)"tid"==t&&"tag"==t||(this.CreateForm[t]="");this.$store.dispatch("AlterTableConfig",{CreatePotentialProVisible:!1})},remoteMethod:function(t){var e=this;""!==t?(this.loadingCust=!0,this.$store.dispatch("SearchCust",{keyword:t,type:"potential"}).then(function(){e.CustList=e.$store.state.user.SearchCust,e.loadingCust=!1})):this.CustList=[]},submitForm:function(){var t=this;this.$refs.CreateForm.validate(function(e){e&&t.$store.dispatch("CreatePotentialPro",t.CreateForm).then(function(){"success"==t.$store.state.user.CreatePotentialPro.status?(t.$notify.success("操作成功"),t.$refs.CreateForm.resetFields(),t.CreateForm.name="",t.CreateForm.estimate="",t.$store.dispatch("PotentialCustomer",t.$store.state.user.PotentialQueryParam)):t.$notify.error("操作失败"),t.Close()})})},onlyNumber:function(t,e,i){e&&!/^[0-9\-]+$/.test(e)?i(new Error("请输入正确的号码")):i()},updateTable:function(){},resetForm:function(t){this.$refs[t].resetFields()}},computed:{visible:function(){return this.$store.state.user.ARTableConfig.CreatePotentialProVisible},FIELD:function(){return this.CreateForm.tid=this.$store.state.user.FIELDS.F_CMK_PROATTR[0].value,this.CreateForm.tag=this.$store.state.user.FIELDS.F_CMK_CUSTAG[0].value,this.$store.state.user.FIELDS}}},Y={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.visible?i("div",{staticClass:"create-project-wapper"},[i("el-dialog",{attrs:{title:"潜在项目",visible:t.visible,"before-close":t.Close,width:"30%"},on:{"update:visible":function(e){t.visible=e}}},[i("el-form",{ref:"CreateForm",attrs:{model:t.CreateForm,rules:t.FormRules}},[i("el-form-item",{attrs:{label:"客户名称","label-width":t.formLabelWidth,prop:"cust_id"}},[i("div",{staticStyle:{width:"100%",display:"flex"}},[i("el-select",{staticStyle:{flex:"1"},attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入客户名称关键词","remote-method":t.remoteMethod,loading:t.loadingCust},model:{value:t.CreateForm.cust_id,callback:function(e){t.$set(t.CreateForm,"cust_id",e)},expression:"CreateForm.cust_id"}},[i("el-option-group",{attrs:{label:"搜索结果"}},t._l(t.CustList,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)],1)]),t._v(" "),i("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"项目名称",prop:"name"}},[i("el-input",{model:{value:t.CreateForm.name,callback:function(e){t.$set(t.CreateForm,"name","string"==typeof e?e.trim():e)},expression:"CreateForm.name"}})],1),t._v(" "),i("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"施工范围",prop:"tid"}},[i("el-select",{staticClass:"CreateForm-select",model:{value:t.CreateForm.tid,callback:function(e){t.$set(t.CreateForm,"tid",e)},expression:"CreateForm.tid"}},t._l(t.FIELD.F_CMK_PROATTR,function(t,e){return i("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),i("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"项目标签",prop:"tag"}},[i("el-select",{staticClass:"CreateForm-select",model:{value:t.CreateForm.tag,callback:function(e){t.$set(t.CreateForm,"tag",e)},expression:"CreateForm.tag"}},t._l(t.FIELD.F_CMK_CUSTAG,function(t,e){return i("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),i("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"联系电话",prop:"phone_num"}},[i("el-input",{attrs:{placeholder:"项目联系电话"},model:{value:t.CreateForm.phone_num,callback:function(e){t.$set(t.CreateForm,"phone_num","string"==typeof e?e.trim():e)},expression:"CreateForm.phone_num"}})],1),t._v(" "),i("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"预计金额"}},[i("el-input",{attrs:{placeholder:"项目的预计合作金额"},model:{value:t.CreateForm.estimate,callback:function(e){t.$set(t.CreateForm,"estimate","string"==typeof e?e.trim():e)},expression:"CreateForm.estimate"}})],1)],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.Close}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("提 交")])],1)],1)],1):t._e()},staticRenderFns:[]};var Z={data:function(){return{}},methods:{getBindAttrFromPath:function(){this.$store.dispatch("getBindAttrFromPath",{path:this.$route.path})}},created:function(){this.getBindAttrFromPath(),this.$store.dispatch("ARSumUserRole"),this.$store.dispatch("InitShrinkStatus",!0)},computed:{Table:function(){return this.$store.state.user.ARCurrentTable}},components:{"v-action":n,"v-filter-dialog":i("VU/8")(P,V,!1,function(t){i("K0es")},"data-v-8916be1e",null).exports,"v-create-cust-dialog":i("VU/8")({data:function(){return{formLabelWidth:"100px",CustypeStatus:!0,form:{name:"",status:"",tag:"",type:1},FormRules:{name:[{required:!0,trigger:"blur",message:"请输入客户名称"}],type:[{required:!0,trigger:"blur",message:"请选择客户类型"}],tag:[{required:!0,trigger:"blur",message:"请选择客户标签"}]},custype:[{label:"合作客户",value:1},{label:"目标客户",value:0}]}},methods:{Close:function(){this.$store.dispatch("AlterTableConfig",{CreateCustVisible:!1})},submitForm:function(){var t=this;this.$refs.CreateForm.validate(function(e){if(!e)return!1;t.$store.dispatch("AddMyCustomer",t.form).then(function(){var e=t.$store.state.user.AddMyCustomer;"success"==e.status?(t.Close(),t.resetForm("CreateForm"),t.$notify.success("客户添加成功！"),t.updateTable(),t.CustypeStatus=!0):t.$notify.error("客户添加失败, "+e.errmsg)})})},CustypeChange:function(){this.CustypeStatus=!this.CustypeStatus},resetForm:function(t){this.$refs[t].resetFields()},updateTable:function(){var t=this.$store.state.user.filterQuery;this.$store.dispatch("ARSum",t)}},computed:{visible:function(){return this.$store.state.user.ARTableConfig.CreateCustVisible},FormField:function(){return this.$store.state.user.FIELDS}}},O,!1,function(t){i("LkIo")},"data-v-66acd800",null).exports,"v-create-pro-dialog":i("VU/8")(N,U,!1,function(t){i("K+Y5")},"data-v-520920d3",null).exports,"v-import-dialog":i("VU/8")(z,W,!1,function(t){i("Tv0o")},"data-v-05576a2e",null).exports,"v-sale-order":i("VU/8")(E,B,!1,function(t){i("do8z")},"data-v-4839cfe4",null).exports,"v-receivebill":i("VU/8")(q,M,!1,function(t){i("3c4j")},"data-v-da523616",null).exports,"v-refund":i("VU/8")(j,Q,!1,function(t){i("aRa9")},"data-v-70e98395",null).exports,"v-rece-plan":i("VU/8")(K,G,!1,function(t){i("S4Cp")},"data-v-fb9cc8d8",null).exports,"v-set-cus":i("VU/8")(H,X,!1,function(t){i("9OWh")},"data-v-09c8a964",null).exports,"v-potential-pro":i("VU/8")(J,Y,!1,function(t){i("wuBX")},"data-v-5968d7b6",null).exports,Cooperate:$,Target:k}},tt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ar-wapper"},[i("v-action"),t._v(" "),i("v-filter-dialog"),t._v(" "),i("v-create-cust-dialog"),t._v(" "),i("v-create-pro-dialog"),t._v(" "),i("v-import-dialog"),t._v(" "),i("keep-alive",[i(t.Table,{tag:"component"})],1),t._v(" "),i("v-sale-order"),t._v(" "),i("v-receivebill"),t._v(" "),i("v-refund"),t._v(" "),i("v-rece-plan"),t._v(" "),i("v-set-cus"),t._v(" "),i("v-potential-pro")],1)},staticRenderFns:[]};var et=i("VU/8")(Z,tt,!1,function(t){i("NCdX")},"data-v-75270d93",null);e.default=et.exports},"7efv":function(t,e){},"9OWh":function(t,e){},CXAo:function(t,e){},GWPl:function(t,e){},"K+Y5":function(t,e){},K0es:function(t,e){},LELi:function(t,e){},LkIo:function(t,e){},NCdX:function(t,e){},S4Cp:function(t,e){},"TEI/":function(t,e){},Tv0o:function(t,e){},aRa9:function(t,e){},do8z:function(t,e){},hBtT:function(t,e){},hEBx:function(t,e){},lMmp:function(t,e){},wuBX:function(t,e){}});