webpackJsonp([3,21],{"4haS":function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"wapper"},[e("div",{staticClass:"title"},[e("span",{staticClass:"icon",on:{click:t.returnLast}},[e("i",{staticClass:"iconfont icon-fanhui"})]),t._v(" "),e("p",{staticClass:"text"},[t._v("客户详情")])]),t._v(" "),e("div",{staticClass:"item-title"},[t._v("\n\t\t"+t._s(t.item.name)+"\n\t")]),t._v(" "),e("div",{staticClass:"tab-container"},[e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[t._v("\n\t\t\t\t发布人\n\t\t\t")]),t._v(" "),e("div",{staticClass:"content"},[t._v(t._s(t.item.creator))])]),t._v(" "),e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[t._v("\n\t\t\t\t联系方式\n\t\t\t")]),t._v(" "),e("div",{staticClass:"content"},[e("a",{attrs:{href:"tel:"+t.item.phone}},[t._v(t._s(t.item.phone))])])]),t._v(" "),e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[t._v("\n\t\t\t\t领取时间\n\t\t\t")]),t._v(" "),e("div",{staticClass:"content"},[t._v(t._s(t.item.action_date))])]),t._v(" "),e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[t._v("\n\t\t\t\t微信\n\t\t\t")]),t._v(" "),e("div",{staticClass:"content"},[t._v(t._s(t.item.wechat))])]),t._v(" "),e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[t._v("\n\t\t\t\tQQ\n\t\t\t")]),t._v(" "),e("div",{staticClass:"content"},[t._v(t._s(t.item.qq))])]),t._v(" "),e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[t._v("\n\t\t\t\t咨询品牌\n\t\t\t")]),t._v(" "),e("div",{staticClass:"content danger"},[t._v(t._s(t.item.brand))])]),t._v(" "),e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[t._v("\n\t\t\t\t地区\n\t\t\t")]),t._v(" "),e("div",{staticClass:"content"},[t._v(t._s(t.item.province)+" "+t._s(t.item.city)+" "+t._s(t.item.area))])]),t._v(" "),e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[t._v("\n\t\t\t\t项目名\n\t\t\t")]),t._v(" "),e("div",{staticClass:"content"},[t._v(t._s(t.item.project_name))])]),t._v(" "),e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[t._v("\n\t\t\t\t产品需求\n\t\t\t")]),t._v(" "),e("div",{staticClass:"content"},[t._v(t._s(t.item.demand))])]),t._v(" "),e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[t._v("\n\t\t\t\t备注信息\n\t\t\t")]),t._v(" "),e("div",{staticClass:"content"},[t._v(t._s(t.item.description))])])])])},staticRenderFns:[]};var a=e("VU/8")({data:function(){return{item:this.$store.state.user.CurrentCustomer}},methods:{returnLast:function(){this.$router.go(-1)},init:function(){this.item.length<1&&this.$router.push("/m/customer/mine")}},created:function(){this.init()}},i,!1,function(t){e("pZ5D")},"data-v-7ebbfc2a",null);s.default=a.exports},jqLA:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("Fd2+"),a=e("4haS"),n={data:function(){return{list:[],limit:3,pageNow:1,loadAll:!1,loading:!1,detailStatus:!1,component:[{name:"detail",template:a.default}],actionsShow:!1,actions:[{name:"跟进客户",callback:this.track},{name:"验收客户",callback:this.accept},{name:"释放客户",callback:this.free}],currentItem:[],freeShow:!1,freeContent:"",freeContentError:""}},created:function(){this.initList()},methods:{returnLast:function(){this.$router.push("/m/customer/index")},load:function(){this.loading=!0,++this.pageNow,this.initList()},detail:function(t){var s=this;this.$store.dispatch("SetCurrentCustomer",t).then(function(){s.$router.push("/m/customer/mine/detail")})},initList:function(){var t=this;0==this.loading&&i.h.loading({message:"加载中",duration:0}),this.$store.dispatch("getPersonalCustomer",{limit:this.limit,offset:this.offset,type:this.customerType}).then(function(){t.loading=!1;var s=t.$store.state.user.personal_customer_list.data;for(var e in t.loadAll=t.$store.state.user.personal_customer_list.loadAll,s)t.list.push(s[e]);i.h.clear()})},showActionSheet:function(t){this.currentItem=t,this.actionsShow=!0},track:function(){var t=this;this.$store.dispatch("SetCurrentCustomer",this.currentItem).then(function(){t.$router.push("/m/customer/mine/comments")})},actionTrack:function(t){this.currentItem=t,this.actionsShow=!0},accept:function(){var t=this;this.actionsShow=!1,this.$dialog.confirm({message:"验收客户 <"+this.currentItem.name+">, 该客户将纳入你的名下,确定进行该操作 ?"}).then(function(){t.submitAccept(t.currentItem)}).catch(function(){})},submitAccept:function(t){var s=this;this.$store.dispatch("acceptCustomer",{id:t.id}).then(function(){if("success"==s.$store.state.user.acceptCustomer.status){i.h.success({duration:2e3,message:"操作成功"});var t=s;setTimeout(function(){t.list=[],s.pageNow=1,t.initList()},2100)}else i.h.fail("操作失败")})},free:function(){this.actionsShow=!1,this.freeShow=!0},beforeClose:function(t,s){"cancel"==t&&s(),"confirm"===t&&(s(!1),this.freeContent.length>=10?(this.freeContentError="",this.submitFree(this.currentItem,this.freeContent,s)):this.freeContentError="字符数量少于10")},freetest:function(){console.log(this.freeContent)},submitFree:function(t,s,e){var a=this;this.$store.dispatch("freeCustomer",{id:t.id,reason:s}).then(function(){e(),"success"==a.$store.state.user.freeCustomer.status?(i.h.success("操作成功"),a.list=[],a.pageNow=1,a.initList()):i.h.fail("操作失败")})}},computed:{offset:function(){return(this.pageNow-1)*this.limit}}},c={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"wapper"},[e("div",{staticClass:"title"},[e("span",{staticClass:"icon",on:{click:t.returnLast}},[e("i",{staticClass:"iconfont icon-fanhui"})]),t._v(" "),e("p",{staticClass:"text"},[t._v("我的客户")])]),t._v(" "),e("div",{staticClass:"tab-container"},[e("mu-load-more",{attrs:{loading:t.loading,"loaded-all":t.loadAll},on:{load:t.load}},t._l(t.list,function(s){return e("div",{staticClass:"item"},[e("div",{staticClass:"item-title"},[e("div",{staticClass:"title-box"},[e("div",{staticClass:"name"},[t._v(t._s(s.name))]),t._v(" "),e("div",{staticClass:"province"},[t._v(t._s(s.province)+" "+t._s(s.city)+" "+t._s(s.area))]),t._v(" "),e("div",{staticClass:"updated"},[t._v("领取时间: "+t._s(s.action_date))])]),t._v(" "),e("div",{staticClass:"author"},[0==s.accept?e("span",{class:0==s.department?"author-public":"author-department"},[t._v(t._s(0==s.department?"公开资源":"部门资源")+"\n\t   \t\t\t\t\t\t")]):e("span",{staticClass:"is-accept"},[t._v("已验收")])])]),t._v(" "),e("div",{staticClass:"item-content"},[e("p",[t._v("\n\t   \t\t\t\t\t\t需求: "+t._s(s.demand)+"\n\t   \t\t\t\t\t")])]),t._v(" "),e("div",{staticClass:"item-foot"},[e("div",{staticClass:"item-label"},[e("span",[e("i",{staticClass:"iconfont icon-biaoqian"})]),t._v(" "),e("span",{staticClass:"item-brand"},[t._v(t._s(s.brand))])]),t._v(" "),e("div",{staticClass:"item-action"},[e("van-button",{attrs:{type:"default",size:"small"},on:{click:function(e){t.detail(s)}}},[e("span",{staticClass:"btn-text"},[t._v("详情")])]),t._v(" "),0==s.accept?e("van-button",{attrs:{type:"default",size:"small"},on:{click:function(e){t.showActionSheet(s)}}},[e("span",{staticClass:"btn-text"},[t._v("操作")])]):e("van-button",{class:"fllow",attrs:{type:"default",size:"small"},on:{click:function(e){t.actionTrack(s)}}},[e("span",{staticClass:"btn-text"},[t._v("跟进")])])],1)])])})),t._v(" "),e("p",{directives:[{name:"show",rawName:"v-show",value:t.loadAll,expression:"loadAll"}],style:{"margin-bottom":"20px","text-align":"center"}},[t._v("已加载完毕, 共 "+t._s(t.list.length)+" 条记录")])],1),t._v(" "),e("van-actionsheet",{attrs:{actions:t.actions,cancelText:"取消"},model:{value:t.actionsShow,callback:function(s){t.actionsShow=s},expression:"actionsShow"}}),t._v(" "),e("van-dialog",{attrs:{"show-cancel-button":"","before-close":t.beforeClose,confirmButtonText:"确认释放"},model:{value:t.freeShow,callback:function(s){t.freeShow=s},expression:"freeShow"}},[e("van-field",{attrs:{type:"textarea",placeholder:"请输入释放原因, 不少于10个字符","error-message":t.freeContentError},model:{value:t.freeContent,callback:function(s){t.freeContent="string"==typeof s?s.trim():s},expression:"freeContent"}})],1)],1)},staticRenderFns:[]};var o=e("VU/8")(n,c,!1,function(t){e("zHdq")},"data-v-d4dc35ba",null);s.default=o.exports},pZ5D:function(t,s){},zHdq:function(t,s){}});