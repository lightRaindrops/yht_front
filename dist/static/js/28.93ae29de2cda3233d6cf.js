webpackJsonp([28],{"+Bxw":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.FirstLoading,expression:"FirstLoading"}],ref:"ArticleList",staticClass:"article-list-wapper",on:{scroll:t.LoadMore,"&scroll":function(i){return t.onScroll(i)}}},[e("div",{staticClass:"article-list-category holder-top"},t._l(t.category,function(i,s){return e("span",{key:s,staticClass:"category-item",class:{"is-active":t.CurrentCateId==i.id},on:{click:function(e){return t.ChangeCategory(i.id)}}},[t._v("\n\t\t\t\t"+t._s(i.name)+"\n\t\t\t")])}),0),t._v(" "),e("div",{staticClass:"hot-content-list"},[t._l(t.article,function(i,s){return e("div",{key:s,staticClass:"hot-item"},[e("div",{staticClass:"item-content"},[(i.titlepic,i.titlepic?e("div",{staticClass:"rich-pic"},[e("img",{attrs:{src:i.titlepic}})]):t._e()),t._v(" "),e("div",{staticClass:"rich-text"},[e("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.JumpArticle(i.id)}}},[t._v("\n                            "+t._s(i.title)+"\n                            "),i.top?e("span",{staticClass:"hot-top-title"},[e("i",{staticClass:"iconfont icon-redu"})]):t._e()]),t._v(" "),e("div",{staticClass:"content"},[t._v("\n                            "+t._s(i.abstract)+"\n                            "),e("span",{staticClass:"read-article",on:{click:function(e){return t.JumpArticle(i.id)}}},[t._v("阅读全文"),e("i",{staticClass:"el-icon-arrow-down"})])])])]),t._v(" "),e("div",{staticClass:"foot-list"},[t.hasRole?e("span",{staticClass:"foot-item"},[i.top?e("el-button",{attrs:{type:"info",size:"mini"},nativeOn:{click:function(e){return t.cancelTop(i.id)}}},[t._v("取消置顶")]):e("el-button",{attrs:{type:"info",size:"mini"},nativeOn:{click:function(e){return t.setTop(i.id)}}},[t._v("置顶")])],1):t._e(),t._v(" "),t.hasRole?e("span",{staticClass:"foot-item"},[e("el-dropdown",[e("el-button",{attrs:{type:"info",size:"mini"}},[t._v("\n                            移动到 "),e("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.category,function(s,o){return s.id>0?e("el-dropdown-item",{key:o,attrs:{disabled:s.id==i.category_id},nativeOn:{click:function(e){return t.ArticleChangeCategory(i.id,s.id,s.name)}}},[t._v(t._s(s.name))]):t._e()}),1)],1)],1):t._e(),t._v(" "),e("span",{staticClass:"foot-item"},[e("i",{staticClass:"iconfont icon-zuozhe"}),t._v(" "),e("span",{staticClass:"foot-name"},[t._v("\n                            作者："+t._s(i.user)+"\n                        ")])]),t._v(" "),e("span",{staticClass:"foot-item"},[e("i",{staticClass:"iconfont icon-shijian01"}),t._v(" "),e("span",{staticClass:"foot-name"},[t._v("\n                            发表时间："+t._s(i.created)+"\n                        ")])]),t._v(" "),e("span",{staticClass:"foot-item"},[e("i",{staticClass:"iconfont icon-ai45"}),t._v(" "),e("span",{staticClass:"foot-name"},[t._v("\n                            点赞："+t._s(i.agree)+"\n                        ")])]),t._v(" "),e("span",{staticClass:"foot-item"},[e("i",{staticClass:"iconfont icon-biaoqian"}),t._v(" "),e("span",{staticClass:"foot-name"},[t._v("\n                            分类： "+t._s(i.category)+"\n                        ")])])])])}),t._v(" "),e("div",{staticClass:"hot-item"},[e("p",{staticClass:"article-loading"},[t._v(t._s(t.LoadMoreStr))])])],2)])},staticRenderFns:[]};var o=e("VU/8")({data:function(){return{fixedStyle:{},CategoryPopver:!1,DateSection:0,pagesize:15,pagenow:1,triggerHeight:50,scrollInit:!1,CurrentCateId:"",isLoading:!1,lastCategory:"",FirstLoading:!0}},methods:{init:function(){this.LoadArticleModuleCategory(this.$route.params.id)},ReloadArticle:function(){this.FirstLoading=!0,this.$store.dispatch("ForumModuleArticlesClear"),this.LoadArticle()},LoadArticle:function(){var t=this;this.isLoading=!0;var i={attr:this.moduleAttr,module_id:this.moduleId,pagesize:this.pagesize,pagenow:this.pagenow,category:this.CurrentCateId};this.$store.dispatch("ForumModuleArticles",i).then(function(){t.isLoading=!1,t.FirstLoading=!1})},JumpArticle:function(t){this.$router.push("/app/forum/article/"+t)},LoadArticleModuleCategory:function(t){var i=this;this.$store.dispatch("LoadArticleModuleCategory",{module_id:t}).then(function(){i.ReloadArticle()})},LoadMore:function(){var t=this.$refs.ArticleList;t.scrollHeight-t.offsetHeight-t.scrollTop<=this.triggerHeight&&!this.loaded&&!this.isLoading&&(this.pagenow+=1,this.LoadArticle())},setTop:function(t){var i=this;this.$confirm("置顶该文章?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"primary"}).then(function(){i.$store.dispatch("SetArticleTop",{id:t}).then(function(){var t=i.$store.state.user.SetArticleTop;"success"==t.status?(i.$notify.success("操作成功"),i.pagenow=1,i.init()):i.$notify.error("操作失败!"+t.errmsg)})}).catch(function(){})},cancelTop:function(t){var i=this;this.$confirm("取消该文章的置顶?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(function(){i.$store.dispatch("CancelArticleTop",{id:t}).then(function(){var t=i.$store.state.user.SetArticleTop;"success"==t.status?(i.$notify.success("操作成功"),i.ReloadArticle()):i.$notify.error("操作失败!"+t.errmsg)})}).catch(function(){})},onScroll:function(){this.scrollInit&&(this.$route.meta.scrollTop=this.$refs.ArticleList.scrollTop)},ChangeCategory:function(t){t!=this.lastCategory&&(this.CurrentCateId=t,this.pagenow=1,this.$route.meta.category=t,this.ReloadArticle(),this.lastCategory=t)},ArticleChangeCategory:function(t,i,e){var s=this;this.$confirm("移动该文章到<"+e+">","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(function(){s.$store.dispatch("ArticleChangeCategory",{article_id:t,category_id:i}).then(function(){var t=s.$store.state.user.ArticleChangeCategory;"success"==t.status?(s.$notify.success("操作成功"),s.ReloadArticle()):s.$notify.error("操作失败!"+t.errmsg)})}).catch(function(){})}},created:function(){},activated:function(){var t=this;this.$nextTick(function(){t.$refs.ArticleList.scrollTo(0,t.$route.meta.scrollTop),t.scrollInit=!0}),this.CurrentCateId=this.$route.meta.category,this.init()},deactivated:function(){this.scrollInit=!1},computed:{article:function(){return this.$store.state.user.ForumModuleArticles.data},hasRole:function(){return this.$store.state.user.ForumModuleArticles.hasRole},moduleId:function(){return this.$route.params.id},moduleAttr:function(){return this.$route.params.attr},loaded:function(){return this.$store.state.user.ForumModuleArticles.loaded},LoadMoreStr:function(){return this.loaded?"加载完毕 共"+this.article.length+"篇文章":"加载中..."},category:function(){var t=this.$store.state.user.ArticleModuleCategory;return t.length>0&&!this.CurrentCateId&&(this.CurrentCateId=t[0].id),t}}},s,!1,function(t){e("qbyb")},"data-v-6341fd01",null);i.default=o.exports},qbyb:function(t,i){}});