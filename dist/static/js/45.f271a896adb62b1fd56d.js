webpackJsonp([45],{DagZ:function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=i("Fd2+"),e={data:function(){return{tabActive:0,tabList:[{name:"公共",type:0},{name:"部门",type:1}],loading:!1,text:"List",limit:3,pageNow:1,currentId:0,list:[],loadAll:!1,btnDisable:!1,btnRubber:!1,customerType:0}},methods:{returnLast:function(){this.$router.go(-1)},load:function(){this.loading=!0,++this.pageNow,this.initList()},initList:function(){var t=this;0==this.loading&&a.h.loading({message:"加载中"}),this.$store.dispatch("getCustomer",{limit:this.limit,offset:this.offset,type:this.customerType}).then(function(){t.loading=!1;var s=t.$store.state.user.customerList.data;for(var i in t.loadAll=t.$store.state.user.customerList.loadAll,s)t.list.push(s[i]);a.h.clear()})},receiveCustomer:function(t){var s=this;this.currentId=t.id,this.btnDisable=!0,this.btnRubber=!0,this.$dialog.confirm({message:"认领客户 <"+t.name+">"}).then(function(){s.receive(t.id)}).catch(function(){s.btnDisable=!1,s.btnRubber=!1})},receive:function(t){var s=this;this.$store.dispatch("receiveCustomer",{id:t}).then(function(){"success"==s.$store.state.user.receiveStatus.status?a.h.success("操作成功"):a.h.fail("操作失败"),s.list=[],s.initList(),s.btnDisable=!1})},tabChange:function(t,s){for(var i in this.tabList)this.tabList[i].name==s&&(this.customerType=this.tabList[i].type);this.list=[],this.loadAll=!1,this.pageNow=1,this.initList()}},created:function(){this.initList()},activated:function(){window.history.pushState(null,null,document.URL)},computed:{offset:function(){return(this.pageNow-1)*this.limit}}},n={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"wapper"},[i("div",{staticClass:"title"},[i("span",{staticClass:"icon",on:{click:t.returnLast}},[i("i",{staticClass:"iconfont icon-fanhui"})]),t._v(" "),i("p",{staticClass:"text"},[t._v("最新资源")])]),t._v(" "),i("van-tabs",{staticClass:"tab-wapper",attrs:{sticky:!0},on:{click:t.tabChange},model:{value:t.tabActive,callback:function(s){t.tabActive=s},expression:"tabActive"}},t._l(t.tabList,function(s,a){return i("van-tab",{key:a,attrs:{title:s.name}},[i("div",{staticClass:"tab-container"},[i("mu-load-more",{attrs:{loading:t.loading,"loaded-all":t.loadAll},on:{load:t.load}},t._l(t.list,function(s){return i("div",{staticClass:"item"},[i("div",{staticClass:"item-title"},[i("div",{staticClass:"name"},[i("span",{staticClass:"customer-name"},[t._v(t._s(s.name))]),t._v(" "),i("span",{staticClass:"item-badge"},[0==s.recount?i("mu-badge",{attrs:{content:"新资源",color:"success"}}):i("mu-badge",{attrs:{content:"领取"+s.recount+"次"}})],1)]),t._v(" "),i("div",{staticClass:"province"},[t._v(t._s(s.province)+" "+t._s(s.city)+" "+t._s(s.area))]),t._v(" "),i("div",{staticClass:"author"},[t._v("来源: "+t._s(s.creator))])]),t._v(" "),i("div",{staticClass:"item-content"},[i("p",[t._v("\n\t\t   \t\t\t\t\t\t需求: "+t._s(s.demand)+"\n\t\t   \t\t\t\t\t")]),t._v(" "),i("span",[t._v("("+t._s(s.time)+")")])]),t._v(" "),i("div",{staticClass:"item-foot"},[i("div",{staticClass:"item-label"},[i("span",[i("i",{staticClass:"iconfont icon-biaoqian"})]),t._v(" "),i("span",{staticClass:"item-brand"},[t._v(t._s(s.brand))])]),t._v(" "),i("div",{staticClass:"item-action",class:{rubber:t.btnRubber&&s.id==t.currentId},on:{click:function(i){return t.receiveCustomer(s)}}},[i("van-button",{attrs:{type:"default",size:"small"}},[i("span",{staticClass:"btn-text"},[i("i",{staticClass:"iconfont icon-jia"}),t._v("领取")])])],1)])])}),0),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:t.loadAll,expression:"loadAll"}],style:{"margin-bottom":"20px","text-align":"center"}},[t._v("已加载完毕, 共 "+t._s(t.list.length)+" 条记录")])],1)])}),1)],1)},staticRenderFns:[]};var c=i("VU/8")(e,n,!1,function(t){i("c+Q1")},"data-v-09eec364",null);s.default=c.exports},"c+Q1":function(t,s){}});