webpackJsonp([11],{"8CWU":function(e,t){},nsLv:function(e,t){},sAAv:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={data:function(){return{FormVisible:!1,ErrVisible:!1,formLabelWidth:"120px",form:{name:"",userlist:[],owner:""},rules:{name:[{required:!0,trigger:"blur",message:"请输入群聊名称"}],owner:[{required:!0,trigger:"blur",message:"必须选择群主"}]}}},methods:{init:function(){this.$store.dispatch("getUserList")},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(t.form.userlist.length<2)return t.ErrVisible=!0,!1;t.ErrVisible=!1,e&&t.$store.dispatch("createChat",t.form).then(function(){"success"==t.$store.state.user.createChat.status?(t.$notify.success("操作成功"),t.FormVisible=!1):t.$notify.error("操作失败")})})}},created:function(){this.init()},computed:{tableData:function(){return[]},list:function(){var e=this.$store.state.user.userList,t=[];for(var r in e){var s={};s.key=e[r].id,s.label=e[r].username,t.push(s)}return t},selectList:function(){var e=this.form.userlist,t=[];for(var r in e)for(var s in this.list)if(e[r]==this.list[s].key){var a={};a.value=this.list[s].key,a.label=this.list[s].label,t.push(a)}return console.log(t),t}}},a={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"containers"},[r("div",{staticClass:"tool"},[r("el-button",{attrs:{type:"success"},nativeOn:{click:function(t){e.FormVisible=!0}}},[e._v("\n\t\t\t添加群聊\n\t\t")])],1),e._v(" "),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[r("el-table-column",{attrs:{label:"id",width:"180"}}),e._v(" "),r("el-table-column",{attrs:{label:"名称",width:"250"}}),e._v(" "),r("el-table-column",{attrs:{label:"群聊标识"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"250"}})],1),e._v(" "),r("el-dialog",{attrs:{title:"新建群聊",visible:e.FormVisible},on:{"update:visible":function(t){e.FormVisible=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[r("el-form-item",{attrs:{label:"群聊名称","label-width":e.formLabelWidth,prop:"name"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),r("el-form-item",[r("el-transfer",{attrs:{data:e.list,titles:["成员","加入群聊"]},model:{value:e.form.userlist,callback:function(t){e.$set(e.form,"userlist",t)},expression:"form.userlist"}})],1),e._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:e.ErrVisible,expression:"ErrVisible"}],staticClass:"error"},[e._v("加入群聊的成员数量不能少于2个人")]),e._v(" "),r("el-form-item",{attrs:{label:" 设定群主","label-width":e.formLabelWidth,prop:"owner"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.owner,callback:function(t){e.$set(e.form,"owner",t)},expression:"form.owner"}},e._l(e.selectList,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.FormVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("form")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var l={data:function(){return{activeName:"first"}},methods:{handleClick:function(e,t){console.log(e,t)}},components:{"v-chat":r("VU/8")(s,a,!1,function(e){r("8CWU")},"data-v-0987ae80",null).exports}},i={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wapper"},[r("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"群聊管理",name:"first"}},[r("v-chat")],1),e._v(" "),r("el-tab-pane",{attrs:{label:"用户管理",name:"second"}},[e._v("用户管理")])],1)],1)},staticRenderFns:[]};var n=r("VU/8")(l,i,!1,function(e){r("nsLv")},"data-v-45945793",null);t.default=n.exports}});