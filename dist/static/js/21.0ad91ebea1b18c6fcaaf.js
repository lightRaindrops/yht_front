webpackJsonp([21],{"0jFl":function(t,e){},clIQ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"brand-wapper"},[a("div",{staticClass:"brand-tool"},[a("el-button",{attrs:{type:"success"},nativeOn:{click:function(e){t.addVisible=!0}}},[t._v("新增品牌")])],1),t._v(" "),a("el-dialog",{attrs:{title:"新增品牌",visible:t.addVisible,center:"",width:"30%"},on:{"update:visible":function(e){t.addVisible=e},close:t.dialogCallback}},[a("el-form",{ref:"form1",attrs:{model:t.form1,rules:t.rules1}},[a("el-form-item",{attrs:{label:"品牌名称",prop:"name","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form1.name,callback:function(e){t.$set(t.form1,"name","string"==typeof e?e.trim():e)},expression:"form1.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"描述",prop:"description","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form1.description,callback:function(e){t.$set(t.form1,"description","string"==typeof e?e.trim():e)},expression:"form1.description"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.submitForm1("form1")}}},[t._v("确 定")]),t._v(" "),a("el-button",{on:{click:function(e){t.addVisible=!1}}},[t._v("取 消")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"修改品牌",visible:t.updateVisible,center:"",width:"30%"},on:{"update:visible":function(e){t.updateVisible=e},close:t.dialogCallback}},[a("el-form",{ref:"form2",attrs:{model:t.form2,rules:t.rules1}},[a("el-form-item",{attrs:{label:"品牌名称",prop:"name","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form2.name,callback:function(e){t.$set(t.form2,"name","string"==typeof e?e.trim():e)},expression:"form2.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"描述",prop:"description","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form2.description,callback:function(e){t.$set(t.form2,"description","string"==typeof e?e.trim():e)},expression:"form2.description"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.submitForm2("form2")}}},[t._v("确 定")]),t._v(" "),a("el-button",{on:{click:function(e){t.updateVisible=!1}}},[t._v("取 消")])],1)],1),t._v(" "),a("div",{staticClass:"table-wapper"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"id",label:"id",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"品牌名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"description",label:"描述"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:1==e.row.status?"success":"danger","disable-transitions":""}},[t._v(t._s(1==e.row.status?"可用":"不可用"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"编辑",placement:"top"}},[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return t.handleUpdate(e.row)}}},[a("i",{staticClass:"el-icon-edit-outline"})])],1),t._v(" "),1==e.row.status?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"禁用",placement:"top"}},[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDisable(e.row)}}},[a("i",{staticClass:"iconfont icon-jinyong"})])],1):a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"启用",placement:"top"}},[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return t.handleEnable(e.row)}}},[a("i",{staticClass:"iconfont icon-qiyong"})])],1)]}}])})],1)],1)],1)},staticRenderFns:[]};var s=a("VU/8")({data:function(){return{dialogTitle:"新增品牌",loading:!1,addVisible:!1,updateVisible:!1,formLabelWidth:"120px",isUpdate:!1,form1:{name:"",description:""},form2:{id:"",name:"",description:""},rules1:{name:[{required:!0,trigger:"blur",message:"品牌名称不能为空"}]}}},methods:{submitForm1:function(t){var e=this;this.$refs[t].validate(function(t){t&&e.$store.dispatch("createBrand",e.form1).then(function(){if("success"==e.$store.state.user.createBrandStatus){for(var t in e.$notify.success({title:"操作成功",message:"品牌添加完毕"}),e.addVisible=!1,e.form1)e.form1[t]="";e.loadTable()}else e.$notify.error({title:"操作失败",message:"品牌添加不成功"})})})},handleUpdate:function(t){for(var e in this.form2)this.form2[e]=t[e];this.updateVisible=!0},submitForm2:function(t){var e=this;this.$refs[t].validate(function(t){t&&(e.isUpdate=!0,e.$store.dispatch("updateBrand",e.form2).then(function(){if("success"==e.$store.state.user.updateBrandStatus.status)for(var t in e.$notify.success({title:"操作成功",message:"品牌更新完毕"}),e.updateVisible=!1,e.form2)e.form2[t]="";else e.$notify.error({title:"操作失败",message:e.$store.state.user.updateBrandStatus.error})}))})},handleEnable:function(t){var e=this;this.$confirm("该操作将启用品牌 <"+t.name+"> , 是否继续？","提示",{type:"warning"}).then(function(){e.updateBrandStatus({id:t.id,status:1})})},handleDisable:function(t){var e=this;this.$confirm("该操作将禁用品牌 <"+t.name+"> , 是否继续？","提示",{type:"warning"}).then(function(){e.updateBrandStatus({id:t.id,status:0})})},loadTable:function(){var t=this;this.loading=!0,this.$store.dispatch("brandList").then(function(){t.loading=!1})},updateBrandStatus:function(t){var e=this;this.$store.dispatch("updateBrandStatus",t).then(function(){"success"==e.$store.state.user.updateBrandEnableStatus?(e.$notify.success({title:"操作成功"}),e.loadTable()):e.$notify.error({title:"操作失败"})})},dialogCallback:function(){this.isUpdate&&(this.loadTable(),this.isUpdate=!1)}},created:function(){this.loadTable()},computed:{tableData:function(){return this.$store.state.user.brandList}}},i,!1,function(t){a("0jFl")},"data-v-7c87c918",null);e.default=s.exports}});